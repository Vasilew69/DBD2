/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./. sync recursive":
/*!*****************!*\
  !*** ././ sync ***!
  \*****************/
/***/ ((module) => {

eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = \"./. sync recursive\";\nmodule.exports = webpackEmptyContext;\n\n//# sourceURL=webpack://dbot/././_sync?");

/***/ }),

/***/ "./auth/auth.js":
/*!**********************!*\
  !*** ./auth/auth.js ***!
  \**********************/
/***/ ((module) => {

eval("module.exports = {\n  ensureAuthenticated: function ensureAuthenticated(req, res, next) {\n    if (req.isAuthenticated && req.isAuthenticated()) return next();\n    res.redirect('/login');\n  },\n  forwardAuthenticated: function forwardAuthenticated(req, res, next) {\n    if (!req.isAuthenticated()) {\n      return next();\n    }\n    res.redirect('/home');\n  }\n};\n\n//# sourceURL=webpack://dbot/./auth/auth.js?");

/***/ }),

/***/ "./auth/passport.js":
/*!**************************!*\
  !*** ./auth/passport.js ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\ndotenv.config({\n  path: './configs/.env'\n});\nvar passport = __webpack_require__(/*! passport */ \"passport\");\nvar DiscordStrategy = (__webpack_require__(/*! passport-discord */ \"passport-discord\").Strategy);\nmodule.exports = function (passport) {\n  var scopes = ['identify', 'email', 'guilds', 'guilds.join'];\n  passport.use(new DiscordStrategy({\n    clientID: process.env.clientId,\n    clientSecret: process.env.clientSecret,\n    callbackURL: process.env.callbackURL,\n    scope: scopes\n  }, function (accessToken, refreshToken, profile, cb) {\n    if (process.env['Admin'].includes(profile.id)) {\n      return cb(null, profile);\n      // removed by dead control flow\n{}\n    } else {\n      return cb(null, false, {\n        message: 'Unauthorised! Please add your client ID to the config!'\n      });\n    }\n  }));\n  passport.serializeUser(function (user, done) {\n    done(null, user);\n  });\n  passport.deserializeUser(function (user, done) {\n    done(null, user);\n  });\n};\n\n//# sourceURL=webpack://dbot/./auth/passport.js?");

/***/ }),

/***/ "./bot.js":
/*!****************!*\
  !*** ./bot.js ***!
  \****************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nvar fs = __webpack_require__(/*! node:fs */ \"node:fs\");\nvar path = __webpack_require__(/*! node:path */ \"node:path\");\nvar dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\nvar _require = __webpack_require__(/*! discord.js */ \"discord.js\"),\n  Client = _require.Client,\n  Collection = _require.Collection,\n  Events = _require.Events,\n  GatewayIntentBits = _require.GatewayIntentBits,\n  MessageFlags = _require.MessageFlags,\n  Partials = _require.Partials;\nvar cors = __webpack_require__(/*! cors */ \"cors\");\nvar morgan = __webpack_require__(/*! morgan */ \"morgan\");\nvar Enmap = __webpack_require__(/*! enmap */ \"enmap\");\nvar _require2 = __webpack_require__(/*! ./modules/logger.js */ \"./modules/logger.js\"),\n  logEvent = _require2.logEvent;\nvar syncHandler = __webpack_require__(/*! ./handlers/guildHandler.js */ \"./handlers/guildHandler.js\");\nvar _require3 = __webpack_require__(/*! discord-player */ \"discord-player\"),\n  Player = _require3.Player;\nvar _require4 = __webpack_require__(/*! @discord-player/extractor */ \"@discord-player/extractor\"),\n  DefaultExtractors = _require4.DefaultExtractors;\nvar _require5 = __webpack_require__(/*! discord-player-youtubei */ \"discord-player-youtubei\"),\n  YoutubeiExtractor = _require5.YoutubeiExtractor;\nvar setStatus = __webpack_require__(/*! ./handlers/statusHandler.js */ \"./handlers/statusHandler.js\");\nvar levelSystem = __webpack_require__(/*! ./events/messageXp.js */ \"./events/messageXp.js\");\ndotenv.config({\n  path: './configs/.env'\n});\nvar token = process.env['token'];\nvar client = null; // we'll use this for dynamic control\n\nfunction createClient() {\n  client = new Client({\n    intents: [GatewayIntentBits.Guilds, GatewayIntentBits.GuildMembers, GatewayIntentBits.GuildMessages, GatewayIntentBits.GuildVoiceStates, GatewayIntentBits.GuildMessageReactions, GatewayIntentBits.MessageContent],\n    partials: [Partials.Message, Partials.Channel, Partials.Reaction, Partials.User]\n  });\n  morgan('dev');\n  cors();\n  client.commands = new Enmap();\n  client.commands = new Collection();\n  var foldersPath = path.join(__dirname, 'commands');\n  var commandFiles = fs.readdirSync(foldersPath).filter(function (file) {\n    return file.endsWith('.js') && file !== 'index.js';\n  });\n  var _iterator = _createForOfIteratorHelper(commandFiles),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var file = _step.value;\n      var filePath = path.join(foldersPath, file);\n      var command = __webpack_require__(\"./. sync recursive\")(filePath);\n      if ('data' in command && 'execute' in command) {\n        client.commands.set(command.data.name, command);\n      } else {\n        console.log(\"[WARNING] The command at \".concat(filePath, \" is missing a required \\\"data\\\" or \\\"execute\\\" property.\"));\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  var commandFolders = fs.readdirSync(foldersPath, {\n    withFileTypes: true\n  }).filter(function (dirent) {\n    return dirent.isDirectory();\n  }).map(function (dirent) {\n    return dirent.name;\n  });\n  var _iterator2 = _createForOfIteratorHelper(commandFolders),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var folder = _step2.value;\n      var commandsPath = path.join(foldersPath, folder);\n      var _commandFiles = fs.readdirSync(commandsPath).filter(function (file) {\n        return file.endsWith('.js');\n      });\n      var _iterator3 = _createForOfIteratorHelper(_commandFiles),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _file = _step3.value;\n          var _filePath = path.join(commandsPath, _file);\n          var _command = __webpack_require__(\"./. sync recursive\")(_filePath);\n          if ('data' in _command && 'execute' in _command) {\n            client.commands.set(_command.data.name, _command);\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n\n    // Load handlers\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  __webpack_require__(/*! ./handlers/commandHandler.js */ \"./handlers/commandHandler.js\")(client);\n  __webpack_require__(/*! ./handlers/playerHandler.js */ \"./handlers/playerHandler.js\")(client);\n  __webpack_require__(/*! ./handlers/reactionHandler */ \"./handlers/reactionHandler.js\")(client);\n  __webpack_require__(/*! ./handlers/AuditLogger */ \"./handlers/AuditLogger.js\")(client);\n  __webpack_require__(/*! ./handlers/autoModHandler.js */ \"./handlers/autoModHandler.js\")(client);\n  client.once('ready', /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          console.log(\"Ready! Logged in as \".concat(client.user.tag));\n          __webpack_require__(/*! ./events/ready.js */ \"./events/ready.js\")(client);\n          __webpack_require__(/*! ./events/guildMember.js */ \"./events/guildMember.js\")(client);\n          setStatus(client);\n          levelSystem(client);\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  })));\n  client.on(Events.InteractionCreate, /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(interaction) {\n      var _interaction$options$;\n      var command, input;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            if (interaction.isChatInputCommand()) {\n              _context2.next = 2;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 2:\n            command = interaction.client.commands.get(interaction.commandName);\n            if (command) {\n              _context2.next = 6;\n              break;\n            }\n            console.error(\"No command matching \".concat(interaction.commandName, \" was found.\"));\n            return _context2.abrupt(\"return\");\n          case 6:\n            _context2.prev = 6;\n            _context2.next = 9;\n            return command.execute(interaction, client);\n          case 9:\n            _context2.next = 21;\n            break;\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](6);\n            console.error(_context2.t0);\n            if (!(interaction.replied || interaction.deferred)) {\n              _context2.next = 19;\n              break;\n            }\n            _context2.next = 17;\n            return interaction.followUp({\n              content: 'There was an error while executing this command!',\n              flags: MessageFlags.Ephemeral\n            });\n          case 17:\n            _context2.next = 21;\n            break;\n          case 19:\n            _context2.next = 21;\n            return interaction.reply({\n              content: 'There was an error while executing this command!',\n              flags: MessageFlags.Ephemeral\n            });\n          case 21:\n            input = \"/\".concat(interaction.commandName, \" \").concat(((_interaction$options$ = interaction.options._hoistedOptions) === null || _interaction$options$ === void 0 ? void 0 : _interaction$options$.map(function (o) {\n              return \"\".concat(o.name, \": \").concat(o.value);\n            }).join(' ')) || '');\n            _context2.next = 24;\n            return logEvent({\n              userId: interaction.user.id,\n              username: interaction.user.username,\n              content: input,\n              type: 'command',\n              guildname: interaction.guild.name,\n              guildid: interaction.guild.id,\n              channelId: interaction.channel.id\n            });\n          case 24:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[6, 11]]);\n    }));\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  syncHandler(client);\n  client.player = new Player(client, {\n    ytdlOptions: {\n      quality: 'highestaudio',\n      highWaterMark: 1 << 25\n    }\n  });\n  client.player.extractors.loadMulti(DefaultExtractors);\n  client.player.extractors.register(YoutubeiExtractor, {});\n  return client.login(token).then(function () {\n    console.log(\"âœ… Discord client logged in!\");\n    console.log(\"Bot started with commit: \".concat(\"c4ed00e\"));\n    return client;\n  })[\"catch\"](function (err) {\n    console.error(\"Error logging in: \", err);\n  });\n}\n\n// For control from Express\nfunction shutdownClient() {\n  if (client) {\n    client.destroy();\n    console.log(\"Bot shut down.\");\n    client = null;\n  }\n}\nfunction restartClient() {\n  return _restartClient.apply(this, arguments);\n}\nfunction _restartClient() {\n  _restartClient = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          shutdownClient();\n          _context3.next = 3;\n          return createClient();\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _restartClient.apply(this, arguments);\n}\nfunction getClient() {\n  return _getClient.apply(this, arguments);\n}\nfunction _getClient() {\n  _getClient = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          return _context4.abrupt(\"return\", client);\n        case 1:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return _getClient.apply(this, arguments);\n}\nmodule.exports = {\n  createClient: createClient,\n  shutdownClient: shutdownClient,\n  restartClient: restartClient,\n  getClient: getClient\n};\n\n//# sourceURL=webpack://dbot/./bot.js?");

/***/ }),

/***/ "./configs/version.json":
/*!******************************!*\
  !*** ./configs/version.json ***!
  \******************************/
/***/ ((module) => {

"use strict";
eval("module.exports = {\"ver\":\"1.1.2-beta\"};\n\n//# sourceURL=webpack://dbot/./configs/version.json?");

/***/ }),

/***/ "./database/checkdb.js":
/*!*****************************!*\
  !*** ./database/checkdb.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\nvar db = __webpack_require__(/*! ./db */ \"./database/db.js\");\ndotenv.config({\n  path: \"./configs/.env\"\n});\nfunction checkAndCreateDB() {\n  return _checkAndCreateDB.apply(this, arguments);\n}\nfunction _checkAndCreateDB() {\n  _checkAndCreateDB = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var _yield$db$query, _yield$db$query2, databases, dbExists, _yield$db$query3, _yield$db$query4, tables, audit_logtableExists, automod_configtableExists, guildTableExists, logsTableExists, membersTableExists, reactionRolesTableExists, activityTableExists, sendMessageTableExists;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return db.query(\"SHOW DATABASES\");\n        case 2:\n          _yield$db$query = _context.sent;\n          _yield$db$query2 = _slicedToArray(_yield$db$query, 1);\n          databases = _yield$db$query2[0];\n          dbExists = databases.some(function (db) {\n            return db.Database === process.env.database;\n          });\n          if (dbExists) {\n            _context.next = 13;\n            break;\n          }\n          console.log(\"Database \".concat(process.env.database, \" does not exist, creating...\"));\n          _context.next = 10;\n          return connection.query(\"CREATE DATABASE `\".concat(process.env.database, \"`\"));\n        case 10:\n          console.log(\"Database \".concat(process.env.database, \" created.\"));\n          _context.next = 14;\n          break;\n        case 13:\n          console.log(\"Database \".concat(process.env.database, \" already exists.\"));\n        case 14:\n          _context.next = 16;\n          return db.query(\"SHOW TABLES\");\n        case 16:\n          _yield$db$query3 = _context.sent;\n          _yield$db$query4 = _slicedToArray(_yield$db$query3, 1);\n          tables = _yield$db$query4[0];\n          audit_logtableExists = tables.some(function (table) {\n            return table[\"Tables_in_\" + process.env.database] === \"audit_logs\";\n          });\n          if (audit_logtableExists) {\n            _context.next = 24;\n            break;\n          }\n          console.log(\"Table audit_logs does not exist, creating...\");\n          _context.next = 24;\n          return db.query(\"CREATE TABLE \".concat(process.env.database, \".audit_logs (\\n            id int(11) NOT NULL AUTO_INCREMENT,\\n            guild_id varchar(20) DEFAULT NULL,\\n            user_id varchar(20) DEFAULT NULL,\\n            action_type varchar(50) DEFAULT NULL,\\n            content text DEFAULT NULL,\\n            arget_id varchar(20) DEFAULT NULL,\\n            timestamp datetime DEFAULT current_timestamp(),\\n            PRIMARY KEY (id)\\n        )ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci;\"));\n        case 24:\n          automod_configtableExists = tables.some(function (table) {\n            return table[\"Tables_in_\" + process.env.database] === \"automod_config\";\n          });\n          if (automod_configtableExists) {\n            _context.next = 29;\n            break;\n          }\n          console.log(\"Table automod_config does not exist, creating...\");\n          _context.next = 29;\n          return db.query(\"CREATE TABLE \".concat(process.env.database, \".automod_config (\\n            guild_id varchar(30) NOT NULL,\\n            excluded_roles text DEFAULT NULL,\\n            log_channel_id varchar(30) DEFAULT NULL,\\n            delete_invites tinyint(1) DEFAULT 1,\\n            delete_ips tinyint(1) DEFAULT 1,\\n            spam_limit int(11) DEFAULT 5,\\n            spam_interval int(11) DEFAULT 5000,\\n            action_on_trigger enum('warn','mute','ban','none') DEFAULT 'warn',\\n            badWords tinyint(1) DEFAULT NULL,\\n            antiSpam tinyint(1) DEFAULT NULL,\\n            excessiveMentions tinyint(1) DEFAULT NULL,\\n            autoModEnabled tinyint(4) DEFAULT NULL,\\n            customWords varchar(255) DEFAULT NULL,\\n            PRIMARY KEY (guild_id)\\n            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci;\"));\n        case 29:\n          guildTableExists = tables.some(function (table) {\n            return table[\"Tables_in_\" + process.env.database] === \"guilds\";\n          });\n          if (guildTableExists) {\n            _context.next = 34;\n            break;\n          }\n          console.log(\"Table guilds does not exist, creating...\");\n          _context.next = 34;\n          return db.query(\"CREATE TABLE \".concat(process.env.database, \".guilds (\\n            id varchar(30) NOT NULL,\\n            name varchar(100) DEFAULT NULL,\\n            icon varchar(255) DEFAULT NULL,\\n            joined_at datetime DEFAULT NULL,\\n            ownerId varchar(255) DEFAULT NULL,\\n            bybot varchar(100) DEFAULT NULL,\\n            created_at datetime DEFAULT NULL,\\n            membercount int(11) DEFAULT NULL,\\n            welcomeChannel varchar(255) DEFAULT NULL,\\n            leaveChannel varchar(255) DEFAULT NULL,\\n            welcomeRole varchar(255) DEFAULT NULL,\\n            welcomeMessage text DEFAULT NULL,\\n            leaveMessage text DEFAULT NULL,\\n            welcomeEnabled tinyint(1) DEFAULT 0,\\n            PRIMARY KEY (id)\\n            )ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci;\"));\n        case 34:\n          logsTableExists = tables.some(function (table) {\n            return table[\"Tables_in_\" + process.env.database] === \"logs\";\n          });\n          if (logsTableExists) {\n            _context.next = 39;\n            break;\n          }\n          console.log(\"Table logs does not exist, creating...\");\n          _context.next = 39;\n          return db.query(\"CREATE TABLE \".concat(process.env.database, \".logs (\\n            id int(11) NOT NULL AUTO_INCREMENT,\\n            userId varchar(50) DEFAULT NULL,\\n            username varchar(100) DEFAULT NULL,\\n            content text DEFAULT NULL,\\n            type enum('message','command') DEFAULT NULL,\\n            timestamp datetime DEFAULT current_timestamp(),\\n            guildname text DEFAULT NULL,\\n            guildid varchar(30) DEFAULT NULL,\\n            channelId varchar(50) DEFAULT NULL,\\n            PRIMARY KEY (id)\\n            )ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci;\"));\n        case 39:\n          membersTableExists = tables.some(function (table) {\n            return table[\"Tables_in_\" + process.env.database] === \"members\";\n          });\n          if (membersTableExists) {\n            _context.next = 44;\n            break;\n          }\n          console.log(\"Table members does not exist, creating...\");\n          _context.next = 44;\n          return db.query(\"CREATE TABLE \".concat(process.env.database, \".members (\\n            id varchar(30) NOT NULL,\\n            guild_id varchar(30) NOT NULL,\\n            username varchar(100) DEFAULT NULL,\\n            discriminator varchar(10) DEFAULT NULL,\\n            avatar varchar(255) DEFAULT NULL,\\n            joined_at datetime DEFAULT NULL,\\n            guildname varchar(255) DEFAULT NULL,\\n            PRIMARY KEY (id, guild_id),\\n            KEY guild_id (guild_id),\\n            CONSTRAINT members_ibfk_1 FOREIGN KEY (guild_id) REFERENCES guilds (id) ON DELETE CASCADE\\n            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci;\"));\n        case 44:\n          reactionRolesTableExists = tables.some(function (table) {\n            return table[\"Tables_in_\" + process.env.database] === \"reaction_roles\";\n          });\n          if (reactionRolesTableExists) {\n            _context.next = 49;\n            break;\n          }\n          console.log(\"Table reaction_roles does not exist, creating...\");\n          _context.next = 49;\n          return db.query(\"CREATE TABLE \".concat(process.env.database, \".reaction_roles (\\n            id int(11) NOT NULL AUTO_INCREMENT,\\n            guild_id varchar(255) DEFAULT NULL,\\n            channel_id varchar(255) DEFAULT NULL,\\n            message_id varchar(255) DEFAULT NULL,\\n            emoji varchar(255) DEFAULT NULL,\\n            role_id varchar(255) DEFAULT NULL,\\n            reactionEnabled tinyint(4) DEFAULT NULL,\\n            message varchar(255) DEFAULT NULL,\\n            PRIMARY KEY (id)\\n            )ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca11400_ai_ci;\"));\n        case 49:\n          activityTableExists = tables.some(function (table) {\n            return table[\"Tables_in_\" + process.env.database] === \"activity\";\n          });\n          if (activityTableExists) {\n            _context.next = 54;\n            break;\n          }\n          console.log(\"table activity does not exist, creating...\");\n          _context.next = 54;\n          return db.query(\"CREATE TABLE IF NOT EXISTS  \".concat(process.env.database, \".activity (\\n            client_id varchar(255) DEFAULT NULL,\\n            type enum('STREAMING','PLAYING','WATCHING','LISTENING') DEFAULT NULL,\\n            name text DEFAULT NULL,\\n            enabled int(2) DEFAULT NULL\\n            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci;\"));\n        case 54:\n          sendMessageTableExists = tables.some(function (table) {\n            return table[\"Tables_in_\" + process.env.database] === \"sendMessage\";\n          });\n          if (sendMessageTableExists) {\n            _context.next = 59;\n            break;\n          }\n          console.log(\"table sendMessage does not exist, creating...\");\n          _context.next = 59;\n          return db.query(\"CREATE TABLE IF NOT EXISTS \".concat(process.env.database, \".sendMessage (\\n  id int(11) NOT NULL AUTO_INCREMENT,\\n  guild_id varchar(255) NOT NULL,\\n  channel_id varchar(255) NOT NULL,\\n  message text NOT NULL,\\n  client_id varchar(255) NOT NULL,\\n  isEmbed tinyint(1) DEFAULT 0,\\n  embed_title varchar(256) DEFAULT NULL,\\n  embed_description text DEFAULT NULL,\\n  embed_color varchar(10) DEFAULT NULL,\\n  embed_footer varchar(256) DEFAULT NULL,\\n  embed_author varchar(256) DEFAULT NULL,\\n  PRIMARY KEY (id),\\n  UNIQUE KEY guild_id (guild_id,channel_id)\\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci;\"));\n        case 59:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _checkAndCreateDB.apply(this, arguments);\n}\nmodule.exports = checkAndCreateDB;\n\n//# sourceURL=webpack://dbot/./database/checkdb.js?");

/***/ }),

/***/ "./database/db.js":
/*!************************!*\
  !*** ./database/db.js ***!
  \************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var mysql = __webpack_require__(/*! mysql2/promise */ \"mysql2/promise\");\nvar dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\ndotenv.config({\n  path: './configs/.env'\n});\nvar db = mysql.createPool({\n  host: process.env.host,\n  user: process.env.user,\n  password: process.env.password,\n  database: process.env.database\n});\nmodule.exports = db;\n\n//# sourceURL=webpack://dbot/./database/db.js?");

/***/ }),

/***/ "./events/guildMember.js":
/*!*******************************!*\
  !*** ./events/guildMember.js ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nmodule.exports = function (client) {\n  client.on('guildMemberAdd', /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(member) {\n      var welcomeEnabled, channelId, roleId, channel, role, joinEmbed;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return isWelcomeSystemEnabled(member.guild.id);\n          case 2:\n            welcomeEnabled = _context.sent;\n            if (welcomeEnabled) {\n              _context.next = 5;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 5:\n            _context.next = 7;\n            return getJoinChannelId(member.guild.id);\n          case 7:\n            channelId = _context.sent;\n            _context.next = 10;\n            return getWelcomeRoleid(member.guild.id);\n          case 10:\n            roleId = _context.sent;\n            if (!(!channelId && !roleId)) {\n              _context.next = 14;\n              break;\n            }\n            console.log(\"No welcome channel or role configured for guild \".concat(member.guild.name));\n            return _context.abrupt(\"return\");\n          case 14:\n            channel = member.guild.channels.cache.get(channelId);\n            role = member.guild.roles.cache.get(roleId);\n            if (!channel) {\n              _context.next = 28;\n              break;\n            }\n            joinEmbed = {\n              color: 0x00ff00,\n              // Green color\n              title: 'Member Joined',\n              description: \"\".concat(member.user.tag, \" has joined the server!\"),\n              thumbnail: {\n                url: member.user.displayAvatarURL({\n                  dynamic: true\n                })\n              },\n              fields: [{\n                name: 'Welcome!',\n                value: \"Please welcome \".concat(member.user.toString(), \" to the server!\")\n              }],\n              timestamp: new Date(),\n              footer: {\n                text: \"Member Count: \".concat(member.guild.memberCount)\n              }\n            };\n            _context.prev = 18;\n            _context.next = 21;\n            return channel.send({\n              embeds: [joinEmbed]\n            });\n          case 21:\n            _context.next = 26;\n            break;\n          case 23:\n            _context.prev = 23;\n            _context.t0 = _context[\"catch\"](18);\n            console.error(\"Could not send join message to channel \".concat(channelId, \":\"), _context.t0);\n          case 26:\n            _context.next = 29;\n            break;\n          case 28:\n            console.error(\"Configured welcome channel not found in guild \".concat(member.guild.name));\n          case 29:\n            if (!role) {\n              _context.next = 40;\n              break;\n            }\n            _context.prev = 30;\n            _context.next = 33;\n            return member.roles.add(role);\n          case 33:\n            _context.next = 38;\n            break;\n          case 35:\n            _context.prev = 35;\n            _context.t1 = _context[\"catch\"](30);\n            console.error(\"Could not assign role \".concat(role.name, \" to \").concat(member.user.tag, \":\"), _context.t1);\n          case 38:\n            _context.next = 41;\n            break;\n          case 40:\n            console.error(\"Configured welcome role not found in guild \".concat(member.guild.name));\n          case 41:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[18, 23], [30, 35]]);\n    }));\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  client.on('guildMemberRemove', /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(member) {\n      var welcomeEnabled, channelId, channel, leaveEmbed;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return isWelcomeSystemEnabled(member.guild.id);\n          case 2:\n            welcomeEnabled = _context2.sent;\n            if (welcomeEnabled) {\n              _context2.next = 5;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 5:\n            _context2.next = 7;\n            return getLeaveChannelId(member.guild.id);\n          case 7:\n            channelId = _context2.sent;\n            if (channelId) {\n              _context2.next = 11;\n              break;\n            }\n            console.log(\"No leave channel configured for guild \".concat(member.guild.name));\n            return _context2.abrupt(\"return\");\n          case 11:\n            channel = member.guild.channels.cache.get(channelId);\n            if (channel) {\n              _context2.next = 15;\n              break;\n            }\n            console.error(\"Configured leave channel not found in guild \".concat(member.guild.name));\n            return _context2.abrupt(\"return\");\n          case 15:\n            leaveEmbed = {\n              color: 0xff0000,\n              // Red color\n              title: 'Member Left',\n              description: \"\".concat(member.user.tag, \" has left the server.\"),\n              thumbnail: {\n                url: member.user.displayAvatarURL({\n                  dynamic: true\n                })\n              },\n              fields: [{\n                name: 'Goodbye!',\n                value: \"We're sad to see \".concat(member.user.tag, \" go.\")\n              }],\n              timestamp: new Date(),\n              footer: {\n                text: \"Member Count: \".concat(member.guild.memberCount)\n              }\n            };\n            _context2.prev = 16;\n            _context2.next = 19;\n            return channel.send({\n              embeds: [leaveEmbed]\n            });\n          case 19:\n            _context2.next = 24;\n            break;\n          case 21:\n            _context2.prev = 21;\n            _context2.t0 = _context2[\"catch\"](16);\n            console.error(\"Could not send leave message to channel \".concat(channelId, \":\"), _context2.t0);\n          case 24:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[16, 21]]);\n    }));\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n\n  // --- Database Fetch Functions ---\n  function getJoinChannelId(_x3) {\n    return _getJoinChannelId.apply(this, arguments);\n  }\n  function _getJoinChannelId() {\n    _getJoinChannelId = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(guildId) {\n      var _yield$db$execute, _yield$db$execute2, rows;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return db.execute('SELECT welcomeChannel FROM guilds WHERE id = ?', [guildId]);\n          case 3:\n            _yield$db$execute = _context3.sent;\n            _yield$db$execute2 = _slicedToArray(_yield$db$execute, 1);\n            rows = _yield$db$execute2[0];\n            return _context3.abrupt(\"return\", rows.length > 0 ? rows[0].welcomeChannel : null);\n          case 9:\n            _context3.prev = 9;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.error(\"Error fetching welcome channel for guild \".concat(guildId, \":\"), _context3.t0);\n            return _context3.abrupt(\"return\", null);\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, null, [[0, 9]]);\n    }));\n    return _getJoinChannelId.apply(this, arguments);\n  }\n  function getLeaveChannelId(_x4) {\n    return _getLeaveChannelId.apply(this, arguments);\n  }\n  function _getLeaveChannelId() {\n    _getLeaveChannelId = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(guildId) {\n      var _yield$db$execute3, _yield$db$execute4, rows;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return db.execute('SELECT leaveChannel FROM guilds WHERE id = ?', [guildId]);\n          case 3:\n            _yield$db$execute3 = _context4.sent;\n            _yield$db$execute4 = _slicedToArray(_yield$db$execute3, 1);\n            rows = _yield$db$execute4[0];\n            return _context4.abrupt(\"return\", rows.length > 0 ? rows[0].leaveChannel : null);\n          case 9:\n            _context4.prev = 9;\n            _context4.t0 = _context4[\"catch\"](0);\n            console.error(\"Error fetching leave channel for guild \".concat(guildId, \":\"), _context4.t0);\n            return _context4.abrupt(\"return\", null);\n          case 13:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4, null, [[0, 9]]);\n    }));\n    return _getLeaveChannelId.apply(this, arguments);\n  }\n  function getWelcomeRoleid(_x5) {\n    return _getWelcomeRoleid.apply(this, arguments);\n  }\n  function _getWelcomeRoleid() {\n    _getWelcomeRoleid = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(guildId) {\n      var _yield$db$execute5, _yield$db$execute6, rows;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            _context5.next = 3;\n            return db.execute('SELECT welcomeRole FROM guilds WHERE id = ?', [guildId]);\n          case 3:\n            _yield$db$execute5 = _context5.sent;\n            _yield$db$execute6 = _slicedToArray(_yield$db$execute5, 1);\n            rows = _yield$db$execute6[0];\n            return _context5.abrupt(\"return\", rows.length > 0 ? rows[0].welcomeRole : null);\n          case 9:\n            _context5.prev = 9;\n            _context5.t0 = _context5[\"catch\"](0);\n            console.error(\"Error fetching welcome role for guild \".concat(guildId, \":\"), _context5.t0);\n            return _context5.abrupt(\"return\", null);\n          case 13:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5, null, [[0, 9]]);\n    }));\n    return _getWelcomeRoleid.apply(this, arguments);\n  }\n  function isWelcomeSystemEnabled(_x6) {\n    return _isWelcomeSystemEnabled.apply(this, arguments);\n  }\n  function _isWelcomeSystemEnabled() {\n    _isWelcomeSystemEnabled = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(guildId) {\n      var _yield$db$execute7, _yield$db$execute8, rows;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            _context6.next = 3;\n            return db.execute('SELECT welcomeEnabled FROM guilds WHERE id = ?', [guildId]);\n          case 3:\n            _yield$db$execute7 = _context6.sent;\n            _yield$db$execute8 = _slicedToArray(_yield$db$execute7, 1);\n            rows = _yield$db$execute8[0];\n            if (!(rows.length > 0)) {\n              _context6.next = 10;\n              break;\n            }\n            return _context6.abrupt(\"return\", rows[0].welcomeEnabled === 1);\n          case 10:\n            return _context6.abrupt(\"return\", false);\n          case 11:\n            _context6.next = 17;\n            break;\n          case 13:\n            _context6.prev = 13;\n            _context6.t0 = _context6[\"catch\"](0);\n            console.error(\"Error checking welcome system for guild \".concat(guildId, \":\"), _context6.t0);\n            return _context6.abrupt(\"return\", false);\n          case 17:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, null, [[0, 13]]);\n    }));\n    return _isWelcomeSystemEnabled.apply(this, arguments);\n  }\n};\n\n//# sourceURL=webpack://dbot/./events/guildMember.js?");

/***/ }),

/***/ "./events/messageXp.js":
/*!*****************************!*\
  !*** ./events/messageXp.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nvar getLevelFromXP = function getLevelFromXP(xp) {\n  return Math.floor(xp / 100);\n};\nfunction messageXp(_x) {\n  return _messageXp.apply(this, arguments);\n}\nfunction _messageXp() {\n  _messageXp = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(client) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          client.on('messageCreate', /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(message) {\n              var userId, guildId, username, _yield$db$query, _yield$db$query2, rows, userData, newXP, newLevel;\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    if (!(message.author.bot || message.guild === null)) {\n                      _context.next = 2;\n                      break;\n                    }\n                    return _context.abrupt(\"return\");\n                  case 2:\n                    userId = message.author.id;\n                    guildId = message.guild.id;\n                    username = message.author.username;\n                    _context.next = 7;\n                    return db.query('SELECT * FROM levels_data WHERE user_id = ? AND guild_id = ?', [userId, guildId]);\n                  case 7:\n                    _yield$db$query = _context.sent;\n                    _yield$db$query2 = _slicedToArray(_yield$db$query, 1);\n                    rows = _yield$db$query2[0];\n                    if (!(rows.length === 0)) {\n                      _context.next = 14;\n                      break;\n                    }\n                    _context.next = 13;\n                    return db.query('INSERT INTO levels_data (user_id, username, guild_id, xp, level) VALUES (?, ?, ?, ?, ?)', [userId, username, guildId, 10, 1]);\n                  case 13:\n                    return _context.abrupt(\"return\");\n                  case 14:\n                    userData = rows[0];\n                    newXP = userData.xp + 10; // Earn 10 XP per message\n                    newLevel = getLevelFromXP(newXP);\n                    if (!(newLevel > userData.level)) {\n                      _context.next = 20;\n                      break;\n                    }\n                    _context.next = 20;\n                    return message.channel.send(\"\\uD83C\\uDF89 <@\".concat(username, \"> leveled up to **Level \").concat(newLevel, \"**!\"));\n                  case 20:\n                    _context.next = 22;\n                    return db.query('UPDATE levels_data SET xp = ?, level = ? WHERE user_id = ? AND guild_id = ?', [newXP, newLevel, userId, guildId]);\n                  case 22:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function (_x2) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _messageXp.apply(this, arguments);\n}\nmodule.exports = messageXp;\n\n//# sourceURL=webpack://dbot/./events/messageXp.js?");

/***/ }),

/***/ "./events/ready.js":
/*!*************************!*\
  !*** ./events/ready.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var chalk = __webpack_require__(/*! chalk */ \"chalk\");\nvar vers = __webpack_require__(/*! ../configs/version.json */ \"./configs/version.json\");\nvar client = __webpack_require__(/*! ../bot */ \"./bot.js\");\nvar figlet = __webpack_require__(/*! figlet */ \"figlet\");\nvar lolcatjs = __webpack_require__(/*! lolcatjs */ \"lolcatjs\");\nvar dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\ndotenv.config({\n  path: './configs/.env'\n});\nmodule.exports = function (client) {\n  // Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð±Ð°Ð½Ð½ÐµÑ€Ð°\n  var banner = figlet.textSync('Discord BOT Dashboard V2', {\n    font: 'Small',\n    horizontalLayout: 'default',\n    width: 1000,\n    whitespaceBreak: true\n  });\n  lolcatjs.fromString(banner);\n\n  // Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐµ\n  console.log(chalk.bold.green('Launched Successfully...'));\n  console.log(chalk.magenta('Version:'), chalk.cyan(\"\".concat(vers.ver)));\n  console.log(chalk.magenta('Made by:'), chalk.cyan('Vasilew'));\n  console.log(chalk.magenta('Prefix:'), chalk.cyan(\"\".concat(process.env['prefix'], \"\\n\")));\n\n  // ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°, Ñ‡Ñ‚Ð¾ ÐºÐ»Ð¸ÐµÐ½Ñ‚ Ð¸ user Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ñ‹\n  if (client.user) {\n    console.log(chalk.green(chalk.bold(\"\".concat(client.user.username)), \"is online!\"));\n  } else {\n    console.error(chalk.red('Error: Client user is undefined.'));\n  }\n  console.log(chalk.green(chalk.bold(\"Dashboard:\"), \"http://localhost:\" + process.env['port']));\n  console.log(chalk.green(chalk.bold(\"âœ… Commands saved with categories!\")));\n};\n\n//# sourceURL=webpack://dbot/./events/ready.js?");

/***/ }),

/***/ "./handlers sync recursive":
/*!************************!*\
  !*** ./handlers/ sync ***!
  \************************/
/***/ ((module) => {

eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = \"./handlers sync recursive\";\nmodule.exports = webpackEmptyContext;\n\n//# sourceURL=webpack://dbot/./handlers/_sync?");

/***/ }),

/***/ "./handlers/AuditLogger.js":
/*!*********************************!*\
  !*** ./handlers/AuditLogger.js ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! discord.js */ \"discord.js\"),\n  EmbedBuilder = _require.EmbedBuilder,\n  ChannelType = _require.ChannelType;\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nvar _require2 = __webpack_require__(/*! ../modules/logger */ \"./modules/logger.js\"),\n  logEvent = _require2.logEvent;\nmodule.exports = function (client) {\n  function getLogChannel(_x) {\n    return _getLogChannel.apply(this, arguments);\n  }\n  function _getLogChannel() {\n    _getLogChannel = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(guildId) {\n      var _yield$db$execute, _yield$db$execute2, rows;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return db.execute('SELECT log_channel_id FROM automod_config WHERE guild_id = ?', [guildId]);\n          case 2:\n            _yield$db$execute = _context5.sent;\n            _yield$db$execute2 = _slicedToArray(_yield$db$execute, 1);\n            rows = _yield$db$execute2[0];\n            if (rows.length) {\n              _context5.next = 7;\n              break;\n            }\n            return _context5.abrupt(\"return\", null);\n          case 7:\n            return _context5.abrupt(\"return\", rows[0].log_channel_id);\n          case 8:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5);\n    }));\n    return _getLogChannel.apply(this, arguments);\n  }\n  function log(_x2, _x3) {\n    return _log.apply(this, arguments);\n  }\n  function _log() {\n    _log = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(guild, embed) {\n      var logChannelId, logChannel;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return getLogChannel(guild.id);\n          case 2:\n            logChannelId = _context6.sent;\n            if (logChannelId) {\n              _context6.next = 5;\n              break;\n            }\n            return _context6.abrupt(\"return\");\n          case 5:\n            logChannel = guild.channels.cache.get(logChannelId);\n            if (!(!logChannel || logChannel.type !== ChannelType.GuildText)) {\n              _context6.next = 8;\n              break;\n            }\n            return _context6.abrupt(\"return\");\n          case 8:\n            logChannel.send({\n              embeds: [embed]\n            })[\"catch\"](console.error);\n          case 9:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6);\n    }));\n    return _log.apply(this, arguments);\n  }\n  client.on('messageCreate', /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(message) {\n      var _message$content;\n      var content, embed;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!(message.author.bot || !message.guild)) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 2:\n            content = (_message$content = message.content) === null || _message$content === void 0 ? void 0 : _message$content.trim();\n            if (!content && message.attachments.size > 0) {\n              content = '[Attachment]';\n            } else if (!content) {\n              content = '[Empty or non-text message]';\n            }\n            _context.next = 6;\n            return logEvent({\n              userId: message.author.id,\n              username: message.author.username,\n              content: content,\n              type: \"message\",\n              guildname: message.guild.name,\n              guildid: message.guild.id,\n              channelId: message.channel.id\n            });\n          case 6:\n            embed = new EmbedBuilder().setColor(0x3498db).setTitle(\"ðŸ†• Message Created\").setDescription(\"**Author:** <@\".concat(message.author.id, \">\\n**Channel:** <#\").concat(message.channel.id, \">\")).addFields({\n              name: \"Content\",\n              value: message.content || \"*No content*\"\n            }).setTimestamp();\n            _context.next = 9;\n            return log(message.guild, embed);\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function (_x4) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  client.on('messageUpdate', /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(oldMsg, newMsg) {\n      var embed;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(oldMsg.partial || newMsg.partial || !newMsg.guild || oldMsg.content === newMsg.content)) {\n              _context2.next = 2;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 2:\n            embed = new EmbedBuilder().setColor(0xf1c40f).setTitle(\"âœï¸ Message Edited\").setDescription(\"**Author:** <@\".concat(newMsg.author.id, \">\\n**Channel:** <#\").concat(newMsg.channel.id, \">\")).addFields({\n              name: \"Before\",\n              value: oldMsg.content || \"*No content*\"\n            }, {\n              name: \"After\",\n              value: newMsg.content || \"*No content*\"\n            }).setTimestamp();\n            _context2.next = 5;\n            return log(newMsg.guild, embed);\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function (_x5, _x6) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  client.on('messageDelete', /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(message) {\n      var _message$author;\n      var embed;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!(message.partial || !message.guild)) {\n              _context3.next = 2;\n              break;\n            }\n            return _context3.abrupt(\"return\");\n          case 2:\n            embed = new EmbedBuilder().setColor(0xe74c3c).setTitle(\"ðŸ—‘ï¸ Message Deleted\").setDescription(\"**Author:** <@\".concat(((_message$author = message.author) === null || _message$author === void 0 ? void 0 : _message$author.id) || \"Unknown\", \">\\n**Channel:** <#\").concat(message.channel.id, \">\")).addFields({\n              name: \"Content\",\n              value: message.content || \"*No content*\"\n            }).setTimestamp();\n            _context3.next = 5;\n            return log(message.guild, embed);\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }));\n    return function (_x7) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n  client.on('interactionCreate', /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(interaction) {\n      var embed;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            if (!(!interaction.guild || !interaction.isCommand())) {\n              _context4.next = 2;\n              break;\n            }\n            return _context4.abrupt(\"return\");\n          case 2:\n            embed = new EmbedBuilder().setColor(0x9b59b6).setTitle(\"âš™ï¸ Slash Command Used\").setDescription(\"**User:** <@\".concat(interaction.user.id, \">\\n**Command:** `/\").concat(interaction.commandName, \"`\")).setTimestamp();\n            _context4.next = 5;\n            return log(interaction.guild, embed);\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4);\n    }));\n    return function (_x8) {\n      return _ref4.apply(this, arguments);\n    };\n  }());\n};\n\n//# sourceURL=webpack://dbot/./handlers/AuditLogger.js?");

/***/ }),

/***/ "./handlers/autoModHandler.js":
/*!************************************!*\
  !*** ./handlers/autoModHandler.js ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nmodule.exports = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(client) {\n    var spamMap;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          spamMap = new Map();\n          client.on(\"messageCreate\", /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(message) {\n              var takeAction, _yield$db$execute, _yield$db$execute2, rows, settings, member, excludedRoles, inviteRegex, ipRegex, actionTake, now, userKey, timestamps, logChannel, _settings$action_on_t;\n              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.prev = 0;\n                    takeAction = /*#__PURE__*/function () {\n                      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(member, action) {\n                        var reason,\n                          _args = arguments;\n                        return _regeneratorRuntime().wrap(function _callee$(_context) {\n                          while (1) switch (_context.prev = _context.next) {\n                            case 0:\n                              reason = _args.length > 2 && _args[2] !== undefined ? _args[2] : \"AutoMod triggered\";\n                              _context.t0 = action;\n                              _context.next = _context.t0 === \"warn\" ? 4 : _context.t0 === \"mute\" ? 7 : _context.t0 === \"kick\" ? 10 : _context.t0 === \"ban\" ? 13 : 16;\n                              break;\n                            case 4:\n                              _context.next = 6;\n                              return member.send(\"You were warned for: \".concat(reason))[\"catch\"](function () {});\n                            case 6:\n                              return _context.abrupt(\"break\", 17);\n                            case 7:\n                              _context.next = 9;\n                              return member.timeout(10 * 60 * 1000, reason)[\"catch\"](console.error);\n                            case 9:\n                              return _context.abrupt(\"break\", 17);\n                            case 10:\n                              _context.next = 12;\n                              return member.kick(reason)[\"catch\"](console.error);\n                            case 12:\n                              return _context.abrupt(\"break\", 17);\n                            case 13:\n                              _context.next = 15;\n                              return member.ban({\n                                reason: reason\n                              })[\"catch\"](console.error);\n                            case 15:\n                              return _context.abrupt(\"break\", 17);\n                            case 16:\n                              return _context.abrupt(\"break\", 17);\n                            case 17:\n                            case \"end\":\n                              return _context.stop();\n                          }\n                        }, _callee);\n                      }));\n                      return function takeAction(_x3, _x4) {\n                        return _ref3.apply(this, arguments);\n                      };\n                    }(); // Log and take action\n                    _context2.next = 4;\n                    return db.execute(\"SELECT * FROM automod_config WHERE guild_id = ?\", [message.guild.id]);\n                  case 4:\n                    _yield$db$execute = _context2.sent;\n                    _yield$db$execute2 = _slicedToArray(_yield$db$execute, 1);\n                    rows = _yield$db$execute2[0];\n                    if (!(!rows.length || rows[0].autoModEnabled == 0)) {\n                      _context2.next = 9;\n                      break;\n                    }\n                    return _context2.abrupt(\"return\");\n                  case 9:\n                    if (!(message.author.bot || !message.guild)) {\n                      _context2.next = 11;\n                      break;\n                    }\n                    return _context2.abrupt(\"return\");\n                  case 11:\n                    settings = rows[0];\n                    member = message.guild.members.cache.get(message.author.id);\n                    excludedRoles = JSON.parse(settings.excluded_roles || \"[]\");\n                    if (!excludedRoles.some(function (r) {\n                      return member.roles.cache.has(r);\n                    })) {\n                      _context2.next = 16;\n                      break;\n                    }\n                    return _context2.abrupt(\"return\");\n                  case 16:\n                    inviteRegex = /(discord\\.gg|discord\\.com\\/invite)/i;\n                    ipRegex = /(?:\\d{1,3}\\.){3}\\d{1,3}/;\n                    actionTake = null;\n                    now = Date.now(); // Anti-invite\n                    if (!(parseInt(settings.delete_invites) === 1 && inviteRegex.test(message.content))) {\n                      _context2.next = 30;\n                      break;\n                    }\n                    _context2.prev = 21;\n                    _context2.next = 24;\n                    return message[\"delete\"]();\n                  case 24:\n                    actionTake = \"Invite link detected\";\n                    _context2.next = 30;\n                    break;\n                  case 27:\n                    _context2.prev = 27;\n                    _context2.t0 = _context2[\"catch\"](21);\n                    console.warn(\"Failed to delete invite message:\", _context2.t0);\n                  case 30:\n                    if (!(!actionTake && parseInt(settings.delete_ips) === 1 && ipRegex.test(message.content))) {\n                      _context2.next = 40;\n                      break;\n                    }\n                    _context2.prev = 31;\n                    _context2.next = 34;\n                    return message[\"delete\"]();\n                  case 34:\n                    actionTake = \"IP address detected\";\n                    _context2.next = 40;\n                    break;\n                  case 37:\n                    _context2.prev = 37;\n                    _context2.t1 = _context2[\"catch\"](31);\n                    console.warn(\"Failed to delete IP message:\", _context2.t1);\n                  case 40:\n                    if (!(!actionTake && parseInt(settings.antiSpam) === 1 && settings.spam_limit && settings.spam_interval)) {\n                      _context2.next = 56;\n                      break;\n                    }\n                    userKey = \"\".concat(message.guild.id, \":\").concat(message.author.id);\n                    timestamps = (spamMap.get(userKey) || []).filter(function (t) {\n                      return now - t < settings.spam_interval;\n                    });\n                    timestamps.push(now);\n                    spamMap.set(userKey, timestamps);\n                    if (!(timestamps.length >= parseInt(settings.spam_limit))) {\n                      _context2.next = 56;\n                      break;\n                    }\n                    _context2.prev = 46;\n                    _context2.next = 49;\n                    return message[\"delete\"]();\n                  case 49:\n                    _context2.next = 54;\n                    break;\n                  case 51:\n                    _context2.prev = 51;\n                    _context2.t2 = _context2[\"catch\"](46);\n                    console.warn(\"Failed to delete spam message:\", _context2.t2);\n                  case 54:\n                    actionTake = \"Spam detected\";\n                    spamMap.set(userKey, []); // reset after trigger\n                  case 56:\n                    if (!(actionTake && settings.log_channel_id && settings.action_on_trigger)) {\n                      _context2.next = 64;\n                      break;\n                    }\n                    logChannel = message.guild.channels.cache.get(settings.log_channel_id);\n                    if (!logChannel) {\n                      _context2.next = 64;\n                      break;\n                    }\n                    logChannel.send({\n                      embeds: [{\n                        title: \"AutoMod Action\",\n                        description: \"**Action:** \".concat(((_settings$action_on_t = settings.action_on_trigger) === null || _settings$action_on_t === void 0 ? void 0 : _settings$action_on_t.toUpperCase()) || 'None', \"\\n**Reason:** \").concat(actionTake, \"\\n**User:** <@\").concat(message.author.id, \">\"),\n                        color: 0xff0000,\n                        timestamp: new Date()\n                      }]\n                    });\n                    _context2.next = 62;\n                    return takeAction(member, settings.action_on_trigger, actionTake);\n                  case 62:\n                    _context2.next = 64;\n                    return db.execute(\"INSERT INTO audit_logs (guild_id, user_id, action_type, content, target_id, timestamp) VALUES (?, ?, ?, ?, ?, ?)\", [message.guild.id, message.author.id, actionTake, message.content, message.id, new Date()]);\n                  case 64:\n                    _context2.next = 69;\n                    break;\n                  case 66:\n                    _context2.prev = 66;\n                    _context2.t3 = _context2[\"catch\"](0);\n                    console.error(\"Error in autoModHandler:\", _context2.t3);\n                  case 69:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2, null, [[0, 66], [21, 27], [31, 37], [46, 51]]);\n            }));\n            return function (_x2) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n//# sourceURL=webpack://dbot/./handlers/autoModHandler.js?");

/***/ }),

/***/ "./handlers/commandHandler.js":
/*!************************************!*\
  !*** ./handlers/commandHandler.js ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nvar _require = __webpack_require__(/*! discord.js */ \"discord.js\"),\n  REST = _require.REST,\n  Routes = _require.Routes;\nvar fs = __webpack_require__(/*! node:fs */ \"node:fs\");\nvar path = __webpack_require__(/*! node:path */ \"node:path\");\nvar dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\ndotenv.config({\n  path: './configs/.env'\n});\nvar clientId = process.env.clientId;\nvar token = process.env.token;\nvar commands = [];\nmodule.exports = function (client) {\n  var foldersPath = path.join(__dirname, '../commands');\n\n  // ðŸ”¹ Load standalone command files (excluding index.js)\n  var commandFiles = fs.readdirSync(foldersPath, {\n    withFileTypes: true\n  }).filter(function (dirent) {\n    return dirent.isFile() && dirent.name.endsWith('.js') && dirent.name !== 'index.js';\n  }) // âœ… Exclude index.js\n  .map(function (dirent) {\n    return dirent.name;\n  });\n  var _iterator = _createForOfIteratorHelper(commandFiles),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var file = _step.value;\n      var filePath = path.join(foldersPath, file);\n      try {\n        var command = __webpack_require__(\"./handlers sync recursive\")(filePath);\n        if ('data' in command && 'execute' in command) {\n          if (!command.data.description || typeof command.data.description !== 'string') {\n            console.error(\"[ERROR] Command at \".concat(filePath, \" is missing a valid description.\"));\n          } else {\n            commands.push(command.data.toJSON());\n          }\n        } else {\n          console.log(\"[WARNING] The command at \".concat(filePath, \" is missing a required \\\"data\\\" or \\\"execute\\\" property.\"));\n        }\n      } catch (error) {\n        console.error(\"[ERROR] Failed to load command \".concat(filePath, \":\"), error);\n      }\n    }\n\n    // ðŸ”¹ Load commands from subdirectories\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  var commandFolders = fs.readdirSync(foldersPath, {\n    withFileTypes: true\n  }).filter(function (dirent) {\n    return dirent.isDirectory();\n  }) // âœ… Ensures only directories are processed\n  .map(function (dirent) {\n    return dirent.name;\n  });\n  var _iterator2 = _createForOfIteratorHelper(commandFolders),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var folder = _step2.value;\n      var folderPath = path.join(foldersPath, folder);\n      var _commandFiles = fs.readdirSync(folderPath).filter(function (file) {\n        return file.endsWith('.js') && file !== 'index.js';\n      });\n      var _iterator3 = _createForOfIteratorHelper(_commandFiles),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _file = _step3.value;\n          var _filePath = path.join(folderPath, _file);\n          try {\n            var _command = __webpack_require__(\"./handlers sync recursive\")(_filePath);\n            if ('data' in _command && 'execute' in _command) {\n              if (!_command.data.description || typeof _command.data.description !== 'string') {\n                console.error(\"[ERROR] Command at \".concat(_filePath, \" is missing a valid description.\"));\n              } else {\n                commands.push(_command.data.toJSON());\n              }\n            } else {\n              console.log(\"[WARNING] The command at \".concat(_filePath, \" is missing a required \\\"data\\\" or \\\"execute\\\" property.\"));\n            }\n          } catch (error) {\n            console.error(\"[ERROR] Failed to load command \".concat(_filePath, \":\"), error);\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n\n    // ðŸ”¹ Deploy the commands\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  var rest = new REST().setToken(token);\n  _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var commandNames, duplicates, data;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          console.log(\"Started refreshing \".concat(commands.length, \" application (/) commands.\"));\n          commandNames = commands.map(function (cmd) {\n            return cmd.name;\n          });\n          duplicates = commandNames.filter(function (name, index) {\n            return commandNames.indexOf(name) !== index;\n          });\n          if (!(duplicates.length > 0)) {\n            _context.next = 7;\n            break;\n          }\n          console.error(\"[ERROR] Duplicate command names detected: \".concat(_toConsumableArray(new Set(duplicates)).join(', ')));\n          return _context.abrupt(\"return\");\n        case 7:\n          _context.next = 9;\n          return rest.put(Routes.applicationCommands(clientId), {\n            body: commands\n          });\n        case 9:\n          data = _context.sent;\n          console.log(\"Successfully reloaded \".concat(data.length, \" application (/) commands.\"));\n          _context.next = 16;\n          break;\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"[ERROR] Failed to deploy commands:\", _context.t0);\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 13]]);\n  }))();\n  try {\n    var _commands = new Map();\n    fs.readdirSync(foldersPath, {\n      withFileTypes: true\n    }).forEach(function (folder) {\n      if (folder.isDirectory()) {\n        var category = folder.name; // Get the folder name as the category\n\n        fs.readdirSync(path.join(foldersPath, category)).forEach(function (file) {\n          if (file.endsWith('.js')) {\n            var commandName = file.replace('.js', '');\n            var commandPath = path.join(foldersPath, category, file);\n            try {\n              var command = __webpack_require__(\"./handlers sync recursive\")(commandPath); // Import command\n              _commands.set(commandName, _objectSpread(_objectSpread({}, command), {}, {\n                category: category,\n                // âœ… Store the detected category\n                filePath: commandPath // âœ… Save the file path\n              }));\n              console.log(\"\\u2705 Loaded command: \".concat(commandName, \" [\").concat(category, \"]\"));\n              var commandsList = [];\n              _commands.forEach(function (command, name) {\n                var _command$data;\n                commandsList.push({\n                  name: name,\n                  description: command.details || 'No description available',\n                  options: ((_command$data = command.data) === null || _command$data === void 0 ? void 0 : _command$data.options) || 'No options available',\n                  location: command.filePath || 'No location provided',\n                  category: command.category || 'Uncategorized' // âœ… Ensures category is saved correctly\n                });\n              });\n              var commandsFilePath = path.join(__dirname, '../configs/commands.json');\n              jsonfile.writeFileSync(commandsFilePath, commandsList, {\n                spaces: 2\n              });\n            } catch (err) {\n              console.error(\"\\u274C Error loading command \\\"\".concat(commandName, \"\\\":\"), err);\n            }\n          }\n        });\n      }\n    });\n  } catch (err) {\n    console.error(\"Error scanning commands:\", err);\n  }\n};\n\n//# sourceURL=webpack://dbot/./handlers/commandHandler.js?");

/***/ }),

/***/ "./handlers/guildHandler.js":
/*!**********************************!*\
  !*** ./handlers/guildHandler.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar db = __webpack_require__(/*! ../database/db.js */ \"./database/db.js\");\nvar chalk = __webpack_require__(/*! chalk */ \"chalk\");\nmodule.exports = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(client) {\n    var syncGuildsAndMembers, _syncGuildsAndMembers;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _syncGuildsAndMembers = function _syncGuildsAndMembers3() {\n            _syncGuildsAndMembers = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n              var _iterator, _step, _step$value, guildId, guild, bot, created, membercount, _iterator2, _step2, _step2$value, memberId, member;\n              return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n                while (1) switch (_context6.prev = _context6.next) {\n                  case 0:\n                    _iterator = _createForOfIteratorHelper(client.guilds.cache);\n                    _context6.prev = 1;\n                    _iterator.s();\n                  case 3:\n                    if ((_step = _iterator.n()).done) {\n                      _context6.next = 37;\n                      break;\n                    }\n                    _step$value = _slicedToArray(_step.value, 2), guildId = _step$value[0], guild = _step$value[1];\n                    bot = client.user.username;\n                    created = guild.createdAt;\n                    membercount = guild.memberCount;\n                    _context6.next = 10;\n                    return db.query(\"\\n          INSERT INTO guilds (id, name, icon, joined_at, ownerId, bybot, created_at, membercount)\\n          VALUES (?, ?, ?, NOW(), ?, ?, ?, ?)\\n          ON DUPLICATE KEY UPDATE name = VALUES(name), icon = VALUES(icon), ownerId = VALUES(ownerId), bybot = VALUES(bybot), created_at = VALUES(created_at), membercount = VALUES(membercount)\\n        \", [guild.id, guild.name, guild.icon, guild.ownerId, bot, created, membercount]);\n                  case 10:\n                    _context6.prev = 10;\n                    _context6.next = 13;\n                    return guild.members.fetch();\n                  case 13:\n                    // Ensure full cache\n                    _iterator2 = _createForOfIteratorHelper(guild.members.cache);\n                    _context6.prev = 14;\n                    _iterator2.s();\n                  case 16:\n                    if ((_step2 = _iterator2.n()).done) {\n                      _context6.next = 22;\n                      break;\n                    }\n                    _step2$value = _slicedToArray(_step2.value, 2), memberId = _step2$value[0], member = _step2$value[1];\n                    _context6.next = 20;\n                    return db.query(\"\\n              INSERT INTO members (id, guild_id, username, discriminator, avatar, joined_at, guildname)\\n              VALUES (?, ?, ?, ?, ?, NOW(), ?)\\n              ON DUPLICATE KEY UPDATE username = VALUES(username), avatar = VALUES(avatar), guildname = VALUES(guildname)\\n            \", [member.id, guild.id, member.user.username, member.user.discriminator, member.user.avatar, guild.name]);\n                  case 20:\n                    _context6.next = 16;\n                    break;\n                  case 22:\n                    _context6.next = 27;\n                    break;\n                  case 24:\n                    _context6.prev = 24;\n                    _context6.t0 = _context6[\"catch\"](14);\n                    _iterator2.e(_context6.t0);\n                  case 27:\n                    _context6.prev = 27;\n                    _iterator2.f();\n                    return _context6.finish(27);\n                  case 30:\n                    _context6.next = 35;\n                    break;\n                  case 32:\n                    _context6.prev = 32;\n                    _context6.t1 = _context6[\"catch\"](10);\n                    console.error(\"Failed to fetch members for guild \".concat(guild.id, \":\"), _context6.t1.message);\n                  case 35:\n                    _context6.next = 3;\n                    break;\n                  case 37:\n                    _context6.next = 42;\n                    break;\n                  case 39:\n                    _context6.prev = 39;\n                    _context6.t2 = _context6[\"catch\"](1);\n                    _iterator.e(_context6.t2);\n                  case 42:\n                    _context6.prev = 42;\n                    _iterator.f();\n                    return _context6.finish(42);\n                  case 45:\n                    console.log(chalk.green(chalk.bold(\"âœ… Synced all guilds and members\")));\n                  case 46:\n                  case \"end\":\n                    return _context6.stop();\n                }\n              }, _callee6, null, [[1, 39, 42, 45], [10, 32], [14, 24, 27, 30]]);\n            }));\n            return _syncGuildsAndMembers.apply(this, arguments);\n          };\n          syncGuildsAndMembers = function _syncGuildsAndMembers2() {\n            return _syncGuildsAndMembers.apply(this, arguments);\n          }; // Initial sync of all guilds and members\n          // Event: New guild\n          client.on(\"guildCreate\", /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(guild) {\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return db.query(\"\\n        INSERT INTO guilds (id, name, icon, joined_at)\\n        VALUES (?, ?, ?, NOW())\\n        ON DUPLICATE KEY UPDATE name = VALUES(name), icon = VALUES(icon)\\n      \", [guild.id, guild.name, guild.icon]);\n                  case 2:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function (_x2) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n\n          // Event: Guild removed\n          client.on(\"guildDelete\", /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(guild) {\n              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.next = 2;\n                    return db.query(\"DELETE FROM guilds WHERE id = ?\", [guild.id]);\n                  case 2:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2);\n            }));\n            return function (_x3) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n\n          // Event: New member\n          client.on(\"guildMemberAdd\", /*#__PURE__*/function () {\n            var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(member) {\n              return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n                while (1) switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.next = 2;\n                    return db.query(\"\\n        INSERT INTO members (id, guild_id, username, discriminator, avatar, joined_at)\\n        VALUES (?, ?, ?, ?, ?, NOW())\\n        ON DUPLICATE KEY UPDATE username = VALUES(username), avatar = VALUES(avatar)\\n      \", [member.id, member.guild.id, member.user.username, member.user.discriminator, member.user.avatar]);\n                  case 2:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }, _callee3);\n            }));\n            return function (_x4) {\n              return _ref4.apply(this, arguments);\n            };\n          }());\n\n          // Event: Member left\n          client.on(\"guildMemberRemove\", /*#__PURE__*/function () {\n            var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(member) {\n              return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                while (1) switch (_context4.prev = _context4.next) {\n                  case 0:\n                    _context4.next = 2;\n                    return db.query(\"DELETE FROM members WHERE id = ? AND guild_id = ?\", [member.id, member.guild.id]);\n                  case 2:\n                  case \"end\":\n                    return _context4.stop();\n                }\n              }, _callee4);\n            }));\n            return function (_x5) {\n              return _ref5.apply(this, arguments);\n            };\n          }());\n          client.once(\"ready\", /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n            return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n              while (1) switch (_context5.prev = _context5.next) {\n                case 0:\n                  console.log(chalk.blue(chalk.bold(\"ðŸ”„ Running full sync...\")));\n                  _context5.next = 3;\n                  return syncGuildsAndMembers();\n                case 3:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }, _callee5);\n          })));\n        case 7:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n//# sourceURL=webpack://dbot/./handlers/guildHandler.js?");

/***/ }),

/***/ "./handlers/playerHandler.js":
/*!***********************************!*\
  !*** ./handlers/playerHandler.js ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! @discord-player/extractor */ \"@discord-player/extractor\"),\n  DefaultExtractors = _require.DefaultExtractors;\nvar _require2 = __webpack_require__(/*! discord-player */ \"discord-player\"),\n  Player = _require2.Player,\n  GuildQueueEvent = _require2.GuildQueueEvent;\nvar _require3 = __webpack_require__(/*! discord-player-youtubei */ \"discord-player-youtubei\"),\n  YoutubeiExtractor = _require3.YoutubeiExtractor;\nmodule.exports = function (client) {\n  var player = new Player(client, {\n    ytdlOptions: {\n      quality: 'highestaudio',\n      highWaterMark: 1 << 25\n    }\n  }); // Set the default volume to 50%\n  player.extractors.loadMulti(DefaultExtractors);\n  player.extractors.register(YoutubeiExtractor, {});\n  player.events.on('playerStart', function (queue, track) {\n    // Emitted when the player starts to play a song\n    var channel = queue.metadata.channel;\n    channel.send(\"Started playing: **\".concat(track.title, \"**\"));\n  });\n  player.events.on('audioTrackAdd', function (queue, track) {\n    // Emitted when the player adds a single song to its queue\n    var channel = queue.metadata.channel;\n    channel.send(\"Track **\".concat(track.title, \"** queued\"));\n  });\n  player.events.on('audioTracksAdd', function (queue, track) {\n    // Emitted when the player adds multiple songs to its queue\n    var channel = queue.metadata.channel;\n    channel.send(\"Multiple Track's queued\");\n  });\n  player.events.on('playerSkip', function (queue, track) {\n    // Emitted when the audio player fails to load the stream for a song\n    var channel = queue.metadata.channel;\n    channel.send(\"Skipping **\".concat(track.title, \"** due to an issue!\"));\n  });\n  player.events.on('disconnect', function (queue) {\n    // Emitted when the bot leaves the voice channel\n    var channel = queue.metadata.channel;\n    channel.send('Looks like my job here is done, leaving now!');\n  });\n  player.events.on('emptyChannel', function (queue) {\n    // Emitted when the voice channel has been empty for the set threshold\n    // Bot will automatically leave the voice channel with this event\n    var channel = queue.metadata.channel;\n    channel.send(\"Leaving because no vc activity for the past 5 minutes\");\n  });\n  player.events.on('emptyQueue', function (queue) {\n    // Emitted when the player queue has finished\n    var channel = queue.metadata.channel;\n    channel.send('Queue finished!');\n  });\n  player.events.on(GuildQueueEvent.PlayerStart, /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(queue, track) {\n      var channel;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            // Get the metadata stored on the queue\n            channel = queue.metadata.channel; // Send a message to the channel\n            _context.next = 3;\n            return channel.send(\"Now playing: \".concat(track.title));\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n\n  // Handle the event when a track finishes playing\n  player.events.on(GuildQueueEvent.PlayerFinish, /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(queue, track) {\n      var channel;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            // Get the metadata stored on the queue\n            channel = queue.metadata.channel; // Send a message to the channel\n            _context2.next = 3;\n            return channel.send(\"Finished playing \".concat(track.title));\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function (_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n};\n\n//# sourceURL=webpack://dbot/./handlers/playerHandler.js?");

/***/ }),

/***/ "./handlers/reactionHandler.js":
/*!*************************************!*\
  !*** ./handlers/reactionHandler.js ***!
  \*************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nmodule.exports = function (client) {\n  function isReactionRolesEnabled(_x) {\n    return _isReactionRolesEnabled.apply(this, arguments);\n  }\n  function _isReactionRolesEnabled() {\n    _isReactionRolesEnabled = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(guildId) {\n      var _yield$db$execute, _yield$db$execute2, rows;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return db.execute('SELECT reactionEnabled FROM reaction_roles WHERE id = ?', [guildId]);\n          case 3:\n            _yield$db$execute = _context.sent;\n            _yield$db$execute2 = _slicedToArray(_yield$db$execute, 1);\n            rows = _yield$db$execute2[0];\n            if (!(rows.length > 0)) {\n              _context.next = 10;\n              break;\n            }\n            return _context.abrupt(\"return\", rows[0].reactionEnabled === 1);\n          case 10:\n            return _context.abrupt(\"return\", false);\n          case 11:\n            _context.next = 17;\n            break;\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](0);\n            console.error(\"Error checking welcome system for guild \".concat(guildId, \":\"), _context.t0);\n            return _context.abrupt(\"return\", false);\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n    return _isReactionRolesEnabled.apply(this, arguments);\n  }\n  function handleReaction(_x2, _x3, _x4) {\n    return _handleReaction.apply(this, arguments);\n  }\n  function _handleReaction() {\n    _handleReaction = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(reaction, user, action) {\n      var guildId, reactionEnabled, emoji, messageId, _yield$db$query, _yield$db$query2, rows, guild, member, role;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            if (!reaction.partial) {\n              _context2.next = 5;\n              break;\n            }\n            _context2.next = 4;\n            return reaction.fetch();\n          case 4:\n            reaction = _context2.sent;\n          case 5:\n            if (!reaction.message.partial) {\n              _context2.next = 9;\n              break;\n            }\n            _context2.next = 8;\n            return reaction.message.fetch();\n          case 8:\n            reaction.message = _context2.sent;\n          case 9:\n            if (!user.partial) {\n              _context2.next = 13;\n              break;\n            }\n            _context2.next = 12;\n            return user.fetch();\n          case 12:\n            user = _context2.sent;\n          case 13:\n            if (!user.bot) {\n              _context2.next = 15;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 15:\n            guildId = reaction.message.guildId; // safer than reaction.guild in partials\n            _context2.next = 18;\n            return isReactionRolesEnabled(guildId);\n          case 18:\n            reactionEnabled = _context2.sent;\n            if (reactionEnabled) {\n              _context2.next = 21;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 21:\n            emoji = reaction.emoji.id || reaction.emoji.name;\n            messageId = reaction.message.id;\n            _context2.next = 25;\n            return db.query('SELECT * FROM reaction_roles WHERE message_id = ? AND emoji = ?', [messageId, emoji]);\n          case 25:\n            _yield$db$query = _context2.sent;\n            _yield$db$query2 = _slicedToArray(_yield$db$query, 1);\n            rows = _yield$db$query2[0];\n            if (rows.length) {\n              _context2.next = 30;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 30:\n            guild = reaction.message.guild;\n            _context2.next = 33;\n            return guild.members.fetch(user.id);\n          case 33:\n            member = _context2.sent;\n            role = guild.roles.cache.get(rows[0].role_id);\n            if (!(!role || !member)) {\n              _context2.next = 37;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 37:\n            if (!(action === 'add')) {\n              _context2.next = 42;\n              break;\n            }\n            _context2.next = 40;\n            return member.roles.add(role);\n          case 40:\n            _context2.next = 44;\n            break;\n          case 42:\n            _context2.next = 44;\n            return member.roles.remove(role);\n          case 44:\n            _context2.next = 49;\n            break;\n          case 46:\n            _context2.prev = 46;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.error('Reaction handler error:', _context2.t0);\n          case 49:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[0, 46]]);\n    }));\n    return _handleReaction.apply(this, arguments);\n  }\n  client.on('messageReactionAdd', function (reaction, user) {\n    return handleReaction(reaction, user, 'add');\n  });\n  client.on('messageReactionRemove', function (reaction, user) {\n    return handleReaction(reaction, user, 'remove');\n  });\n};\n\n//# sourceURL=webpack://dbot/./handlers/reactionHandler.js?");

/***/ }),

/***/ "./handlers/statusHandler.js":
/*!***********************************!*\
  !*** ./handlers/statusHandler.js ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nvar _require = __webpack_require__(/*! discord.js */ \"discord.js\"),\n  ActivityType = _require.ActivityType;\nfunction setStatus(_x) {\n  return _setStatus.apply(this, arguments);\n}\nfunction _setStatus() {\n  _setStatus = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(client) {\n    var _result$type;\n    var query, clientId, _yield$db$query, _yield$db$query2, results, result, name, rawType, validTypes, activityType;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(!client || !client.isReady())) {\n            _context.next = 2;\n            break;\n          }\n          return _context.abrupt(\"return\");\n        case 2:\n          query = \"SELECT * FROM activity WHERE client_id = ?;\";\n          clientId = client.user.id;\n          _context.next = 6;\n          return db.query(query, [clientId], function (err, result) {\n            if (err) {\n              console.log(err);\n              return;\n            }\n            if (result.enabled == 0) return;\n            return result;\n          });\n        case 6:\n          _yield$db$query = _context.sent;\n          _yield$db$query2 = _slicedToArray(_yield$db$query, 1);\n          results = _yield$db$query2[0];\n          result = results === null || results === void 0 ? void 0 : results[0];\n          name = result.name || 'your status here';\n          rawType = ((_result$type = result.type) === null || _result$type === void 0 ? void 0 : _result$type.trim().toUpperCase()) || 'PLAYING';\n          validTypes = {\n            PLAYING: ActivityType.Playing,\n            WATCHING: ActivityType.Watching,\n            LISTENING: ActivityType.Listening,\n            COMPETING: ActivityType.Competing,\n            STREAMING: ActivityType.Streaming\n          };\n          activityType = validTypes[rawType];\n          if (!activityType) {\n            console.warn(\"Invalid activity type \\\"\".concat(result.type, \"\\\". Defaulting to PLAYING.\"));\n            client.user.setActivity(name, {\n              type: ActivityType.Playing\n            });\n          } else {\n            client.user.setActivity(name, {\n              type: activityType\n            });\n          }\n          console.log(\"\\u2705 Status set to: \".concat(rawType, \" \").concat(name));\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _setStatus.apply(this, arguments);\n}\nmodule.exports = setStatus;\n\n//# sourceURL=webpack://dbot/./handlers/statusHandler.js?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar path = __webpack_require__(/*! node:path */ \"node:path\");\nvar fs = __webpack_require__(/*! fs */ \"fs\");\nvar https = __webpack_require__(/*! https */ \"https\");\nvar express = __webpack_require__(/*! express */ \"express\");\nvar _require = __webpack_require__(/*! ./bot */ \"./bot.js\"),\n  createClient = _require.createClient,\n  getClient = _require.getClient;\nvar flash = __webpack_require__(/*! connect-flash */ \"connect-flash\");\nvar session = __webpack_require__(/*! express-session */ \"express-session\");\nvar passport = __webpack_require__(/*! passport */ \"passport\");\nvar fileUpload = __webpack_require__(/*! express-fileupload */ \"express-fileupload\");\nvar dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\nvar morgan = __webpack_require__(/*! morgan */ \"morgan\");\nvar cors = __webpack_require__(/*! cors */ \"cors\");\nvar favicon = __webpack_require__(/*! serve-favicon */ \"serve-favicon\");\ndotenv.config({\n  path: './configs/.env'\n});\nvar partials = __webpack_require__(/*! express-partials */ \"express-partials\");\nvar app = express();\napp.use(function (req, res, next) {\n  if (!req.secure) {\n    return res.redirect(\"https://\".concat(req.headers.host).concat(req.url));\n  }\n  next();\n});\n\n// ðŸ”’ Load SSL certificates\nvar sslOptions = {\n  key: fs.readFileSync('./ssl/key.pem'),\n  cert: fs.readFileSync('./ssl/cert.pem')\n};\n\n// ðŸ”’ Create HTTPS server\nvar httpsServer = https.createServer(sslOptions, app);\nvar io = __webpack_require__(/*! socket.io */ \"socket.io\")(httpsServer);\nvar createDbAndTables = __webpack_require__(/*! ./database/checkdb.js */ \"./database/checkdb.js\");\n\n// Trust proxy for secure cookies\napp.set('trust proxy', 1);\napp.use(function (req, res, next) {\n  if (req.session && req.session.passport && req.session.passport.user) {\n    User.findById(req.session.passport.user, function (err, user) {\n      if (err) return next(err);\n      req.user = user;\n      next();\n    });\n  } else {\n    next();\n  }\n});\napp.set('views', path.join(__dirname, 'views'));\nvar RateLimit = __webpack_require__(/*! express-rate-limit */ \"express-rate-limit\");\nvar checkForUpdates = __webpack_require__(/*! ./modules/updateChecker.js */ \"./modules/updateChecker.js\");\nvar limiter = RateLimit({\n  windowMs: 15 * 60 * 1000,\n  max: 100\n});\nvar port = process.env.port || 443;\napp.use(limiter);\napp.use(express[\"static\"]('./public'));\napp.use(express[\"static\"]('./themes'));\napp.use(partials());\napp.set('view engine', 'ejs');\napp.use(express.urlencoded({\n  extended: true,\n  limit: '5mb'\n}));\napp.use(fileUpload());\napp.use(express.json());\napp.use(favicon(path.join(__dirname, 'public', 'images', 'favicon.png')));\n__webpack_require__(/*! ./auth/passport */ \"./auth/passport.js\")(passport);\napp.use(morgan('dev'), cors());\ncreateClient().then(function (loggedInClient) {\n  io.sockets.on('connection', function (sockets) {\n    setInterval(function () {\n      var days = Math.floor(loggedInClient.uptime / 86400000);\n      var hours = Math.floor(loggedInClient.uptime / 3600000) % 24;\n      var minutes = Math.floor(loggedInClient.uptime / 60000) % 60;\n      var seconds = Math.floor(loggedInClient.uptime / 1000) % 60;\n      var BOTuptime = \"\".concat(days, \"d \").concat(hours, \"h \").concat(minutes, \"m \").concat(seconds, \"s\");\n      sockets.emit('uptime', {\n        uptime: BOTuptime\n      });\n    }, 1000);\n  });\n});\napp.use(session({\n  secret: process.env.secret,\n  resave: false,\n  saveUninitialized: true,\n  secure: true,\n  httpOnly: true\n}));\napp.use(passport.initialize());\napp.use(passport.session());\napp.use(flash());\napp.use(function (req, res, next) {\n  res.locals.success = req.flash('success');\n  res.locals.error = req.flash('error');\n  next();\n});\n\n// Routes\napp.use('/', __webpack_require__(/*! ./routes/home.js */ \"./routes/home.js\"));\napp.use('/', __webpack_require__(/*! ./routes/settings.js */ \"./routes/settings.js\"));\napp.use('/', __webpack_require__(/*! ./routes/guilds.js */ \"./routes/guilds.js\"));\napp.use('/', __webpack_require__(/*! ./routes/support.js */ \"./routes/support.js\"));\napp.use('/', __webpack_require__(/*! ./routes/commands.js */ \"./routes/commands.js\"));\napp.use('/', __webpack_require__(/*! ./routes/player.js */ \"./routes/player.js\"));\napp.use('/', __webpack_require__(/*! ./routes/history.js */ \"./routes/history.js\"));\napp.use(\"/\", __webpack_require__(/*! ./routes/members.js */ \"./routes/members.js\"));\napp.use(\"/\", __webpack_require__(/*! ./routes/welcome.js */ \"./routes/welcome.js\"));\napp.use(\"/\", __webpack_require__(/*! ./routes/plugins.js */ \"./routes/plugins.js\"));\napp.use(\"/\", __webpack_require__(/*! ./routes/reactionRoles.js */ \"./routes/reactionRoles.js\"));\napp.use(\"/\", __webpack_require__(/*! ./routes/automod.js */ \"./routes/automod.js\"));\napp.use(\"/\", __webpack_require__(/*! ./routes/activity.js */ \"./routes/activity.js\"));\napp.use(\"/\", __webpack_require__(/*! ./routes/sendMessage.js */ \"./routes/sendMessage.js\"));\napp.use(\"/\", __webpack_require__(/*! ./routes/levels.js */ \"./routes/levels.js\"));\napp.use('/login', __webpack_require__(/*! ./routes/login.js */ \"./routes/login.js\"));\n\n// Error handling\napp.use(function (err, req, res, next) {\n  console.error(err.stack);\n  res.status(err.status || 500).render('error_pages/500', {\n    message: err.message,\n    error: err,\n    status: err.status || 500\n  });\n});\napp.use(function (req, res) {\n  res.status(404).render('error_pages/404', {\n    url: req.originalUrl,\n    method: req.method\n  });\n});\n\n// Start HTTPS server\nhttpsServer.listen(port, function () {\n  console.log(\"\\u2705 HTTPS server running at https://localhost:\".concat(port));\n});\n\n// Database setup\ncreateDbAndTables().then(function () {\n  console.log(\"ðŸ“¦ Database and tables are set up.\");\n})[\"catch\"](function (err) {\n  console.error(\"âŒ Error setting up database:\", err);\n});\nglobal.updateStatus = {\n  Latestversion: null,\n  Currentversion: null,\n  updateAvailable: false,\n  updateType: null,\n  isBetaTester: false\n};\nfunction runUpdateCheck() {\n  return _runUpdateCheck.apply(this, arguments);\n} // Run on startup and every 10 mins\nfunction _runUpdateCheck() {\n  _runUpdateCheck = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var result;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return checkForUpdates();\n        case 3:\n          result = _context.sent;\n          global.updateStatus = result;\n          _context.next = 10;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ Update check failed:\", _context.t0);\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return _runUpdateCheck.apply(this, arguments);\n}\nrunUpdateCheck();\nsetInterval(runUpdateCheck, 24 * 60 * 60 * 1000);\nexports = limiter;\n\n//# sourceURL=webpack://dbot/./index.js?");

/***/ }),

/***/ "./modules/logger.js":
/*!***************************!*\
  !*** ./modules/logger.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nfunction logEvent(_x) {\n  return _logEvent.apply(this, arguments);\n}\nfunction _logEvent() {\n  _logEvent = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {\n    var userId, username, content, type, guildname, guildid, channelId;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          userId = _ref.userId, username = _ref.username, content = _ref.content, type = _ref.type, guildname = _ref.guildname, guildid = _ref.guildid, channelId = _ref.channelId;\n          _context.prev = 1;\n          _context.next = 4;\n          return db.execute('INSERT INTO logs (userId, username, content, type, guildname, guildid, channelId ) VALUES (?, ?, ?, ?, ?, ?, ?)', [userId, username, content, type, guildname, guildid, channelId]);\n        case 4:\n          _context.next = 9;\n          break;\n        case 6:\n          _context.prev = 6;\n          _context.t0 = _context[\"catch\"](1);\n          console.error('Error logging event:', _context.t0);\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 6]]);\n  }));\n  return _logEvent.apply(this, arguments);\n}\nmodule.exports = {\n  logEvent: logEvent\n};\n\n//# sourceURL=webpack://dbot/./modules/logger.js?");

/***/ }),

/***/ "./modules/updateChecker.js":
/*!**********************************!*\
  !*** ./modules/updateChecker.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var request = __webpack_require__(/*! request */ \"request\");\nvar chalk = __webpack_require__(/*! chalk */ \"chalk\");\nvar semver = __webpack_require__(/*! semver */ \"semver\");\nvar localVersion = __webpack_require__(/*! ../configs/version.json */ \"./configs/version.json\");\nfunction checkForUpdates() {\n  return new Promise(function (resolve, reject) {\n    var options = {\n      method: 'GET',\n      url: 'http://localhost:3001/version',\n      // Changed URL\n      headers: {\n        'User-Agent': 'Discord-Bot-Dashboard',\n        useQueryString: true\n      }\n    };\n    request(options, function (error, response, body) {\n      var updateAvailable = false;\n      var updateType = null;\n      var latestVersion = null;\n      var isBetaTester = semver.prerelease(localVersion.ver) !== null;\n      var localSemver = null;\n      if (localVersion.ver && semver.valid(localVersion.ver)) {\n        localSemver = localVersion.ver;\n      }\n      try {\n        var jsonparsed = JSON.parse(body);\n        var remoteStableVersion = jsonparsed.latestStable;\n        var remoteDevVersion = jsonparsed.latestDev;\n        if (isBetaTester && remoteDevVersion) {\n          latestVersion = remoteDevVersion;\n          // For beta, we can just check if the remote dev hash is different\n          updateAvailable = remoteDevVersion !== (localVersion.devHash || localVersion.ver); // Assuming you might store dev hash locally\n          if (updateAvailable) {\n            updateType = 'dev'; // Or some other identifier\n          }\n        } else if (remoteStableVersion && localSemver && semver.valid(remoteStableVersion)) {\n          latestVersion = remoteStableVersion;\n          if (semver.gt(remoteStableVersion, localSemver)) {\n            updateAvailable = true;\n            updateType = semver.diff(localSemver, remoteStableVersion);\n          }\n        }\n        if (updateAvailable) {\n          console.log(chalk.yellow(\"\\u26A0\\uFE0F \\xA0Update available (\".concat(updateType, \"): \").concat(localVersion.ver, \" \\u2192 \").concat(latestVersion)));\n          if (isBetaTester) {\n            console.log(chalk.blue(\"\\u2139\\uFE0F \\xA0You are running a pre-release version.\"));\n          }\n        } else {\n          console.log(chalk.green(\"\\u2705 You are using the latest version (\".concat(localVersion.ver).concat(isBetaTester ? ' (beta)' : '', \").\")));\n        }\n        resolve({\n          Latestversion: latestVersion || localVersion.ver,\n          Currentversion: localVersion.ver,\n          updateAvailable: updateAvailable,\n          updateType: updateType,\n          isBetaTester: isBetaTester\n        });\n      } catch (e) {\n        console.log(chalk.red(\"Failed to check for updates. You may continue using this version.\"));\n        resolve({\n          Latestversion: localVersion.ver,\n          Currentversion: localVersion.ver,\n          updateAvailable: false,\n          updateType: null,\n          isBetaTester: isBetaTester\n        });\n      }\n    });\n  });\n}\nmodule.exports = checkForUpdates;\n\n//# sourceURL=webpack://dbot/./modules/updateChecker.js?");

/***/ }),

/***/ "./routes/activity.js":
/*!****************************!*\
  !*** ./routes/activity.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated;\nvar _require2 = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require2.getClient;\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nvar themes = './configs/theme.json';\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nrouter.get(\"/activity\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, clientId, success, theme, query, _yield$db$query, _yield$db$query2, activity, savedActivity;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return getClient();\n        case 2:\n          client = _context.sent;\n          _context.prev = 3;\n          clientId = client.user.id;\n          success = req.query.success ? \"âœ… Status saved!\" : null;\n          theme = jsonfile.readFileSync(themes);\n          query = \"SELECT * FROM activity WHERE client_id = ?\";\n          _context.next = 10;\n          return db.query(query, [clientId], function (err, result, next) {\n            if (err) {\n              console.error(\"âŒ Route error:\", err.message);\n              err.status = 500;\n              next(err); // Forward to your global 500 handler\n            }\n            return result;\n          });\n        case 10:\n          _yield$db$query = _context.sent;\n          _yield$db$query2 = _slicedToArray(_yield$db$query, 1);\n          activity = _yield$db$query2[0];\n          savedActivity = activity[0] || {};\n          res.render(\"home/activity\", {\n            client: client,\n            profile: req.user,\n            theme: theme,\n            activity: savedActivity,\n            success: success,\n            clientId: clientId\n          });\n          _context.next = 22;\n          break;\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](3);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[3, 17]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post(\"/activity/save\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var _req$body, activity_name, activity_type, clientId, Aenabled;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _req$body = req.body, activity_name = _req$body.activity_name, activity_type = _req$body.activity_type, clientId = _req$body.clientId;\n          Aenabled = req.body.activityEnabled ? 1 : 0;\n          _context2.next = 5;\n          return db.execute(\"UPDATE activity SET name = ?, type = ?, enabled = ? WHERE client_id = ? \", [activity_name || null, activity_type, Aenabled, clientId]);\n        case 5:\n          res.redirect(\"/activity?success=true\");\n          _context2.next = 13;\n          break;\n        case 8:\n          _context2.prev = 8;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context2.t0.message);\n          _context2.t0.status = 500;\n          next(_context2.t0);\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 8]]);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/activity.js?");

/***/ }),

/***/ "./routes/automod.js":
/*!***************************!*\
  !*** ./routes/automod.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar _require = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require.getClient;\nvar themes = './configs/theme.json';\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar _require2 = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require2.ensureAuthenticated;\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nvar _require3 = __webpack_require__(/*! ../utils/getBotGuilds */ \"./utils/getBotGuilds.js\"),\n  getBotGuild = _require3.getBotGuild;\nvar _require4 = __webpack_require__(/*! discord.js */ \"discord.js\"),\n  ChannelType = _require4.ChannelType;\nrouter.get('/automod', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var _settings$excludedRol, _settings$customWords, client, success, guildId, theme, guild, textChannels, roles, query1, _ref2, _ref3, settings, savedSettings;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return getClient();\n        case 3:\n          client = _context.sent;\n          success = req.query.success ? \"âœ… AutoMod saved!\" : null;\n          guildId = req.query.guildId;\n          _context.next = 8;\n          return jsonfile.readFileSync(themes);\n        case 8:\n          theme = _context.sent;\n          _context.next = 11;\n          return getBotGuild(guildId);\n        case 11:\n          guild = _context.sent;\n          if (guild) {\n            _context.next = 14;\n            break;\n          }\n          throw new Error(\"Guild with ID \".concat(guildId, \" not found or bot is not in the guild.\"));\n        case 14:\n          _context.next = 16;\n          return guild.channels.fetch();\n        case 16:\n          // Fetch fresh channels from Discord\n          textChannels = guild.channels.cache.filter(function (channel) {\n            return channel.type === ChannelType.GuildText;\n          }).map(function (channel) {\n            return {\n              id: channel.id,\n              name: channel.name\n            };\n          });\n          roles = guild.roles.cache.map(function (role) {\n            return {\n              id: role.id,\n              name: role.name\n            };\n          });\n          query1 = \"SELECT * FROM automod_config WHERE guild_id = ?\";\n          _context.next = 21;\n          return db.query(query1, [req.query.guildId], function (err, results, next) {\n            if (err) {\n              if (err) {\n                console.error(\"âŒ Route error:\", err.message);\n                err.status = 500;\n                next(err); // Forward to your global 500 handler\n              }\n            }\n            return results;\n          });\n        case 21:\n          _context.t0 = _context.sent;\n          if (_context.t0) {\n            _context.next = 24;\n            break;\n          }\n          _context.t0 = {};\n        case 24:\n          _ref2 = _context.t0;\n          _ref3 = _slicedToArray(_ref2, 1);\n          settings = _ref3[0];\n          (_settings$excludedRol = settings.excludedRoles) !== null && _settings$excludedRol !== void 0 ? _settings$excludedRol : settings.excludedRoles = [];\n          (_settings$customWords = settings.customWords) !== null && _settings$customWords !== void 0 ? _settings$customWords : settings.customWords = [];\n\n          // Ensure excludedRoles is always an array\n          if (!Array.isArray(settings.excludedRoles)) {\n            settings.excludedRoles = [];\n          }\n          if (!Array.isArray(settings.customWords)) {\n            settings.customWords = [];\n          }\n          savedSettings = settings[0] || {};\n          res.render('home/automod', {\n            client: client,\n            profile: req.user,\n            guildId: guildId,\n            theme: theme,\n            success: success,\n            roles: roles,\n            settings: savedSettings,\n            channels: textChannels\n          });\n          _context.next = 40;\n          break;\n        case 35:\n          _context.prev = 35;\n          _context.t1 = _context[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context.t1.message);\n          _context.t1.status = 500;\n          next(_context.t1);\n        case 40:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 35]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post('/automod/save', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var autoModEnabled, _req$body, guildId, excluded_roles, log_channel_id, delete_invites, delete_ips, spam_limit, spam_interval, action_on_trigger, badWords, antiSpam, excessiveMentions, customWords, _yield$db$execute, _yield$db$execute2, rows;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          autoModEnabled = req.body.autoModEnabled ? 1 : 0;\n          _req$body = req.body, guildId = _req$body.guildId, excluded_roles = _req$body.excluded_roles, log_channel_id = _req$body.log_channel_id, delete_invites = _req$body.delete_invites, delete_ips = _req$body.delete_ips, spam_limit = _req$body.spam_limit, spam_interval = _req$body.spam_interval, action_on_trigger = _req$body.action_on_trigger, badWords = _req$body.badWords, antiSpam = _req$body.antiSpam, excessiveMentions = _req$body.excessiveMentions, customWords = _req$body.customWords;\n          _context2.next = 5;\n          return db.execute(\"SELECT * FROM automod_config WHERE guild_id = ? LIMIT 1\", [guildId]);\n        case 5:\n          _yield$db$execute = _context2.sent;\n          _yield$db$execute2 = _slicedToArray(_yield$db$execute, 1);\n          rows = _yield$db$execute2[0];\n          _context2.next = 10;\n          return db.execute(\"\\n      INSERT INTO automod_config (guild_id, excluded_roles, log_channel_id, delete_invites, delete_ips, spam_limit, spam_interval, action_on_trigger, badWords, antiSpam, excessiveMentions, autoModEnabled, customWords)\\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\\n      ON DUPLICATE KEY UPDATE\\n      excluded_roles = VALUES(excluded_roles),\\n      log_channel_id = VALUES(log_channel_id),\\n      delete_invites = VALUES(delete_invites),\\n      delete_ips = VALUES(delete_ips),\\n      spam_limit = VALUES(spam_limit),\\n      spam_interval = VALUES(spam_interval),\\n      action_on_trigger = VALUES(action_on_trigger),\\n      autoModEnabled = VALUES(autoModEnabled),\\n      customWords = VALUES(customWords),\\n      badWords = VALUES(badWords),\\n      antiSpam = VALUES(antiSpam),\\n      excessiveMentions = VALUES(excessiveMentions)\\n    \", [guildId, JSON.stringify(excluded_roles || []), log_channel_id || null, delete_invites ? 1 : 0, delete_ips ? 1 : 0, spam_limit ? parseInt(spam_limit) : null, spam_interval ? parseInt(spam_interval) : null, action_on_trigger, badWords ? 1 : 0, antiSpam ? 1 : 0, excessiveMentions ? 1 : 0, autoModEnabled, customWords || null]);\n        case 10:\n          res.redirect(\"/automod?guildId=\".concat(guildId, \"&success=true\"));\n          _context2.next = 18;\n          break;\n        case 13:\n          _context2.prev = 13;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context2.t0.message);\n          _context2.t0.status = 500;\n          next(_context2.t0);\n        case 18:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 13]]);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/automod.js?");

/***/ }),

/***/ "./routes/commands.js":
/*!****************************!*\
  !*** ./routes/commands.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar discord = __webpack_require__(/*! ../bot */ \"./bot.js\");\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated,\n  forwardAuthenticated = _require.forwardAuthenticated;\nvar fs = __webpack_require__(/*! fs */ \"fs\");\nvar sanitize = __webpack_require__(/*! sanitize-filename */ \"sanitize-filename\");\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar themes = \"./configs/theme.json\";\nvar prth = \"./configs/prth.json\";\nvar commandsJsonFile = \"./configs/commands.json\";\nvar path = __webpack_require__(/*! path */ \"path\");\nvar _require2 = __webpack_require__(/*! inspector */ \"inspector\"),\n  console = _require2.console;\nrouter.get('/commands', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, commands, theme, commandsToggle;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return discord.getClient();\n        case 3:\n          client = _context.sent;\n          commands = jsonfile.readFileSync(commandsJsonFile); // Read commands from JSON file  // Log the commands to check the format\n          console.log(commands);\n          theme = jsonfile.readFileSync(themes); // Read theme settings\n          commandsToggle = jsonfile.readFileSync('./configs/settings.json'); // Read settings for toggles\n          // Now render the page\n          res.render('home/commands', {\n            profile: req.user,\n            client: client,\n            commands: commands,\n            // Pass the whole commands object\n            commandsToggle: commandsToggle,\n            // Pass the settings for commands toggling\n            theme: theme,\n            // Pass the theme to the template\n            prth: prth // Path to prth config\n          });\n          _context.next = 16;\n          break;\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 11]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post('/commands/remove/:plugin', ensureAuthenticated, function (req, res) {\n  try {\n    var commandName = req.params.plugin;\n    var commands = jsonfile.readFileSync(commandsJsonFile);\n\n    // Find the command object\n    var commandToDelete = commands.find(function (cmd) {\n      return cmd.name === commandName;\n    });\n    if (!commandToDelete || !commandToDelete.location) {\n      req.flash('error', \"Plugin \".concat(commandName, \" not found!\"));\n      return res.redirect('/commands');\n    }\n    var filePath = commandToDelete.location;\n    console.log(\"Deleting:\", filePath);\n    if (!filePath || typeof filePath !== \"string\") {\n      req.flash('error', \"Invalid file path for \".concat(commandName));\n      return res.redirect('/commands');\n    }\n    if (fs.existsSync(filePath)) {\n      fs.unlinkSync(filePath);\n      req.flash('success', \"Plugin \".concat(commandName, \" removed!\"));\n    } else {\n      req.flash('error', \"Plugin file not found: \".concat(filePath));\n    }\n    res.redirect('/commands');\n  } catch (err) {\n    console.error(\"Error while removing plugin:\", err);\n    req.flash('error', 'An error occurred while removing the plugin');\n    res.redirect('/commands');\n  }\n});\nrouter.post('/commands/toggle', ensureAuthenticated, function (req, res) {\n  // Remove plugin from settings file\n  if (req.body.toggle == \"true\") {\n    fs.readFile('./configs/settings.json', function (err, data) {\n      var json = JSON.parse(data);\n      if (!json.includes(req.body.commandName)) {\n        return req.flash('error', \"Error\"), res.redirect('/commands');\n      }\n      json.splice(json.indexOf(\"\".concat(req.body.commandName)), 1);\n      try {\n        fs.writeFile(\"./configs/settings.json\", JSON.stringify(json), function (err) {\n          res.redirect('/commands');\n        });\n      } catch (err) {\n        console.log(err);\n        res.status(500);\n        res.end();\n      }\n    });\n  }\n\n  // Add plugin to settings file\n  if (req.body.toggle == \"false\") {\n    fs.readFile('./configs/settings.json', function (err, data) {\n      var json = JSON.parse(data);\n      if (json.includes(req.body.commandName)) {\n        return req.flash('error', \"Error\"), res.redirect('/commands');\n      }\n      json.push(\"\".concat(req.body.commandName));\n      try {\n        fs.writeFile(\"./configs/settings.json\", JSON.stringify(json), function (err) {\n          res.redirect('/commands');\n        });\n      } catch (err) {\n        console.log(err);\n        res.status(500);\n        res.end();\n      }\n    });\n  }\n});\nrouter.post('/commands/upload', ensureAuthenticated, function (req, res) {\n  var _req$body$category;\n  if (!req.files || Object.keys(req.files).length === 0) {\n    req.flash('error', 'No file uploaded!');\n    return res.redirect('/commands');\n  }\n  var sampleFile = req.files.sampleFile;\n\n  // Debug: Log the category value\n  console.log('Category from request:', req.body.category);\n\n  // Check the category value\n  var sanitize = __webpack_require__(/*! sanitize-filename */ \"sanitize-filename\");\n  var category = sanitize(((_req$body$category = req.body.category) === null || _req$body$category === void 0 ? void 0 : _req$body$category.trim()) || 'misc');\n  console.log('Final sanitized category chosen:', category); // Log final category\n\n  // Ensure the category folder exists\n  var baseDir = path.join(__dirname, 'commands');\n  var categoryPath = path.join(baseDir, category);\n  var resolvedPath = path.resolve(categoryPath);\n  if (!resolvedPath.startsWith(baseDir)) {\n    req.flash('error', 'Invalid category name!');\n    return res.redirect('/commands');\n  }\n  if (!fs.existsSync(resolvedPath)) {\n    fs.mkdirSync(resolvedPath, {\n      recursive: true\n    });\n  }\n\n  // Check if the file already exists in the chosen category\n  var sanitizedFileName = sanitize(sampleFile.name);\n  if (!sanitizedFileName) {\n    req.flash('error', 'Invalid file name!');\n    return res.redirect('/commands');\n  }\n  var sanitizedFileNameA = sanitize(sampleFile.name);\n  console.log('Sanitized file name:', sanitizedFileNameA); // Debug: Log the sanitized file name\n  var uploadPath = path.join(categoryPath, sanitizedFileNameA);\n  if (fs.existsSync(uploadPath)) {\n    req.flash('error', 'A plugin with that name already exists!');\n    return res.redirect('/commands');\n  }\n  sampleFile.mv(uploadPath, function (err) {\n    if (err) {\n      console.error('Error moving file:', err);\n      return res.status(500).send(err);\n    }\n    req.flash('success', \"Plugin \".concat(sampleFile.name, \" uploaded in \").concat(category, \" category!\"));\n    res.redirect('/commands');\n    console.log('Category path:', categoryPath); // This will show the actual path where the file is being uploaded.\n  });\n});\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/commands.js?");

/***/ }),

/***/ "./routes/guilds.js":
/*!**************************!*\
  !*** ./routes/guilds.js ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated,\n  forwardAuthenticated = _require.forwardAuthenticated;\nvar discord = __webpack_require__(/*! ../bot */ \"./bot.js\");\nvar dateformat = __webpack_require__(/*! dateformat */ \"dateformat\");\nvar number = __webpack_require__(/*! easy-number-formatter */ \"easy-number-formatter\");\nvar themes = \"./configs/theme.json\";\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nrouter.get('/guilds', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var _client, theme, name, _yield$db$execute, _yield$db$execute2, guilds, guildsic, guildIcons;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return discord.getClient();\n        case 3:\n          _client = _context.sent;\n          theme = jsonfile.readFileSync(themes);\n          name = _client && _client.user ? _client.user.username : 'Bot Offline';\n          _context.next = 8;\n          return db.execute(\"SELECT * FROM guilds WHERE bybot = '\".concat(name, \"'\"));\n        case 8:\n          _yield$db$execute = _context.sent;\n          _yield$db$execute2 = _slicedToArray(_yield$db$execute, 1);\n          guilds = _yield$db$execute2[0];\n          if (guilds) {\n            _context.next = 13;\n            break;\n          }\n          throw new Error(\"Guilds not found\");\n        case 13:\n          guildsic = _client.guilds.cache.map(function (guild) {\n            return {\n              id: guild.id,\n              iconURL: guild.iconURL({\n                dynamic: true,\n                size: 128\n              }) // You can adjust size\n            };\n          });\n          guildIcons = {};\n          guildsic.forEach(function (g) {\n            return guildIcons[g.id] = g.iconURL;\n          });\n          res.render('home/guilds', {\n            guilds: guilds,\n            profile: req.user,\n            client: _client,\n            dateformat: dateformat,\n            number: number,\n            guildIcons: guildIcons,\n            theme: theme\n          });\n          _context.next = 24;\n          break;\n        case 19:\n          _context.prev = 19;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0); // Forward to your global 500 handler\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 19]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post('/guilds/leave/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          client.guilds.cache.get(req.params.id).leave().then(function (value) {\n            req.flash('success', \"Succesfully left guild \\\"\".concat(value.name, \"\\\"\"));\n            res.redirect('/guilds');\n          });\n          if (client.guilds.cache.get(req.params.id)) {\n            _context2.next = 4;\n            break;\n          }\n          throw new Error(\"Guild not found\");\n        case 4:\n          _context2.next = 11;\n          break;\n        case 6:\n          _context2.prev = 6;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context2.t0.message);\n          _context2.t0.status = 500;\n          next(_context2.t0); // Forward to your global 500 handler\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 6]]);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nrouter.post('/guilds/plugins/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          try {\n            guildId = req.params.id;\n            res.redirect(\"/plugins?guildId=\".concat(guildId));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error); // Forward to your global 500 handler\n          }\n        case 1:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/guilds.js?");

/***/ }),

/***/ "./routes/history.js":
/*!***************************!*\
  !*** ./routes/history.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nvar router = express.Router();\nvar themes = \"../src/configs/theme.json\";\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar _require = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require.getClient;\nvar _require2 = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require2.ensureAuthenticated;\nvar _require3 = __webpack_require__(/*! ../utils/getBotGuilds */ \"./utils/getBotGuilds.js\"),\n  getBotGuild = _require3.getBotGuild;\nvar _require4 = __webpack_require__(/*! discord.js */ \"discord.js\"),\n  ChannelType = _require4.ChannelType;\nrouter.get('/history', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, guildId, theme, page, limit, offset, type, baseQuery, countQuery, params, guild, textChannels, _yield$db$query, _yield$db$query2, results, _yield$db$query3, _yield$db$query4, _yield$db$query4$, count, totalPages;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return getClient();\n        case 3:\n          client = _context.sent;\n          guildId = req.query.guildId;\n          theme = jsonfile.readFileSync(themes);\n          page = parseInt(req.query.page) || 1;\n          limit = 25;\n          offset = (page - 1) * limit;\n          type = req.query.type || 'all';\n          baseQuery = \"SELECT * FROM logs WHERE guildid = ?\";\n          countQuery = \"SELECT COUNT(*) as count FROM logs WHERE guildid = ?\";\n          params = [guildId];\n          if (type !== 'all') {\n            baseQuery += ' WHERE type = ?';\n            countQuery += ' WHERE type = ?';\n            params.push(type);\n          }\n          baseQuery += ' ORDER BY timestamp DESC LIMIT ? OFFSET ?';\n          params.push(limit, offset);\n          _context.next = 18;\n          return getBotGuild(guildId);\n        case 18:\n          guild = _context.sent;\n          _context.next = 21;\n          return guild.channels.fetch();\n        case 21:\n          textChannels = guild.channels.cache.filter(function (channel) {\n            return channel.type === ChannelType.GuildText;\n          }).map(function (channel) {\n            return {\n              id: channel.id,\n              name: channel.name\n            };\n          });\n          _context.next = 24;\n          return db.query(baseQuery, params, function (err, result, next) {\n            if (err) {\n              console.error(\"âŒ Route error:\", err.message);\n              err.status = 500;\n              next(err); // Forward to your global 500 handler\n            }\n            return result;\n          });\n        case 24:\n          _yield$db$query = _context.sent;\n          _yield$db$query2 = _slicedToArray(_yield$db$query, 1);\n          results = _yield$db$query2[0];\n          _context.next = 29;\n          return db.query(countQuery, [guildId], function (err, result, next) {\n            if (err) {\n              console.error(\"âŒ Route error:\", err.message);\n              err.status = 500;\n              next(err); // Forward to your global 500 handler\n            }\n            return result;\n          });\n        case 29:\n          _yield$db$query3 = _context.sent;\n          _yield$db$query4 = _slicedToArray(_yield$db$query3, 1);\n          _yield$db$query4$ = _slicedToArray(_yield$db$query4[0], 1);\n          count = _yield$db$query4$[0].count;\n          totalPages = Math.ceil(count / limit);\n          if (results) {\n            _context.next = 36;\n            break;\n          }\n          throw new Error(\"âŒ Route error: No logs found.\");\n        case 36:\n          res.render('home/history', {\n            profile: req.user,\n            client: client,\n            theme: theme,\n            logs: results,\n            currentPage: page,\n            totalPages: totalPages,\n            selectedType: type.Date,\n            guild: guildId,\n            channels: textChannels\n          });\n          _context.next = 44;\n          break;\n        case 39:\n          _context.prev = 39;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0); // Forward to your global 500 handler\n        case 44:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 39]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post('/clear/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var guildId, delquery;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          guildId = req.params.id;\n          delquery = \"DELETE FROM logs WHERE guildId = ?\";\n          _context2.next = 5;\n          return db.query(delquery, [guildId], function (err, result, next) {\n            if (err) {\n              console.error(\"âŒ Route error:\", err.message);\n              err.status = 500;\n              next(err); // Forward to your global 500 handler\n            }\n            return result;\n          });\n        case 5:\n          res.redirect(\"/history?guildId=\".concat(guildId));\n          _context2.next = 13;\n          break;\n        case 8:\n          _context2.prev = 8;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context2.t0.message);\n          _context2.t0.status = 500;\n          next(_context2.t0);\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 8]]);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nrouter.post('/add/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res, next) {\n    var guildId, _req$body, id, username, userId, content, type, guildname, timestamp;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          guildId = req.params.id;\n          _req$body = req.body, id = _req$body.id, username = _req$body.username, userId = _req$body.userId, content = _req$body.content, type = _req$body.type, guildname = _req$body.guildname;\n          timestamp = new Date();\n          _context3.next = 6;\n          return db.execute('INSERT INTO logs (userId, username, content, type, guildname, guildId) VALUES (?, ?, ?, ?, ?, ?)', [userId, username, content, type, guildname, guildId]);\n        case 6:\n          res.redirect(\"/history?guildId=\".concat(guildId));\n          _context3.next = 14;\n          break;\n        case 9:\n          _context3.prev = 9;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context3.t0.message);\n          _context3.t0.status = 500;\n          next(_context3.t0);\n        case 14:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 9]]);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/history.js?");

/***/ }),

/***/ "./routes/home.js":
/*!************************!*\
  !*** ./routes/home.js ***!
  \************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar dateFormat = __webpack_require__(/*! dateformat */ \"dateformat\");\nvar dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar semver = __webpack_require__(/*! semver */ \"semver\"); // <-- added\nvar chalk = __webpack_require__(/*! chalk */ \"chalk\"); // optional, for logging color\nvar _require = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require.getClient,\n  shutdownClient = _require.shutdownClient,\n  restartClient = _require.restartClient,\n  createClient = _require.createClient;\nvar _require2 = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require2.ensureAuthenticated,\n  forwardAuthenticated = _require2.forwardAuthenticated;\nvar ver = __webpack_require__(/*! ../configs/version.json */ \"./configs/version.json\");\nvar number = __webpack_require__(/*! easy-number-formatter */ \"easy-number-formatter\");\nvar request = __webpack_require__(/*! request */ \"request\");\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar now = new Date();\ndotenv.config({\n  path: './configs/.env'\n});\nvar themes = \"./configs/theme.json\";\nvar update = global.updateStatus || {\n  Latestversion: null,\n  Currentversion: null,\n  updateAvailable: false,\n  updateType: null,\n  isBetaTester: false\n};\nrouter.get('/', ensureAuthenticated, function (req, res) {\n  res.redirect('/home');\n});\nrouter.get('/home', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _client$user;\n    var client, username, profile, theme;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return getClient();\n        case 2:\n          _context.t0 = _context.sent;\n          if (_context.t0) {\n            _context.next = 5;\n            break;\n          }\n          _context.t0 = {};\n        case 5:\n          client = _context.t0;\n          username = ((_client$user = client.user) === null || _client$user === void 0 ? void 0 : _client$user.username) || \"Bot Offline\";\n          profile = req.user;\n          if (profile) {\n            _context.next = 10;\n            break;\n          }\n          return _context.abrupt(\"return\", res.render('error', {\n            message: 'Profile is not available.'\n          }));\n        case 10:\n          theme = jsonfile.readFileSync(themes);\n          res.render('home/home', {\n            profile: profile,\n            client: client,\n            joinedDate: dateFormat(now, \"dddd, mmmm dS, yyyy, h:MM:ss TT\"),\n            prefix: \"/\",\n            number: number,\n            theme: theme,\n            Latestversion: global.updateStatus.Latestversion,\n            Currentversion: global.updateStatus.Currentversion,\n            updateAvailable: global.updateStatus.updateAvailable,\n            updateType: global.updateStatus.updateType,\n            isBetaTester: global.updateStatus.isBetaTester\n          });\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// Logout\nrouter.get('/logout', function (req, res, next) {\n  req.logout(function (err) {\n    if (err) return next(err);\n    req.flash('success', 'Logged out');\n    res.redirect('/login');\n  });\n});\nrouter.post('/api/power/shutdown', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          try {\n            shutdownClient();\n            req.flash('success', 'Bot has been shutdown');\n            res.redirect('/home');\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nrouter.post(\"/api/power/restart\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res, next) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          try {\n            restartClient();\n            setTimeout(function () {\n              req.flash('success', 'Bot has been shutdown');\n              res.redirect('/home'), 10000;\n            });\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nrouter.post(\"/api/power/start\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res, next) {\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          try {\n            createClient();\n            req.flash('success', 'Bot has been restarted');\n            res.redirect('/home');\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x9, _x0, _x1) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/home.js?");

/***/ }),

/***/ "./routes/levels.js":
/*!**************************!*\
  !*** ./routes/levels.js ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated;\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nvar discord = __webpack_require__(/*! ../bot */ \"./bot.js\");\nvar themes = \"./configs/theme.json\";\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nrouter.get(\"/levels\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var guildId, _yield$db$query, _yield$db$query2, levels, client, theme, countQuery, params, page, limit, offset, _yield$db$query3, _yield$db$query4, _yield$db$query4$, count, totalPages;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          guildId = req.query.guildId;\n          _context.next = 3;\n          return db.query(\"SELECT * FROM levels_data Where guild_id = ?\", [guildId]);\n        case 3:\n          _yield$db$query = _context.sent;\n          _yield$db$query2 = _slicedToArray(_yield$db$query, 1);\n          levels = _yield$db$query2[0];\n          _context.next = 8;\n          return discord.getClient();\n        case 8:\n          client = _context.sent;\n          _context.next = 11;\n          return jsonfile.readFileSync(themes);\n        case 11:\n          theme = _context.sent;\n          countQuery = \"SELECT COUNT(*) as count FROM levels_data WHERE guild_id = ?\";\n          params = [guildId];\n          page = parseInt(req.query.page) || 1;\n          limit = 25;\n          offset = (page - 1) * limit;\n          params.push(limit, offset);\n          _context.next = 20;\n          return db.query(countQuery, [guildId], function (err, result, next) {\n            if (err) {\n              console.error(\"âŒ Route error:\", err.message);\n              err.status = 500;\n              next(err); // Forward to your global 500 handler\n            }\n            return result;\n          });\n        case 20:\n          _yield$db$query3 = _context.sent;\n          _yield$db$query4 = _slicedToArray(_yield$db$query3, 1);\n          _yield$db$query4$ = _slicedToArray(_yield$db$query4[0], 1);\n          count = _yield$db$query4$[0].count;\n          totalPages = Math.ceil(count / limit);\n          res.render(\"home/levels\", {\n            profile: req.user,\n            client: client,\n            theme: theme,\n            levels: levels,\n            guildId: guildId,\n            currentPage: page,\n            totalPages: totalPages\n          });\n        case 26:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post(\"/levels/settings/:id\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          guildId = req.params.id;\n          try {\n            res.redirect(\"/levels-settings?guildId=\".concat(guildId, \"&success=true\"));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/levels.js?");

/***/ }),

/***/ "./routes/login.js":
/*!*************************!*\
  !*** ./routes/login.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar _require = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require.getClient;\nvar _require2 = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require2.ensureAuthenticated,\n  forwardAuthenticated = _require2.forwardAuthenticated;\nvar passport = __webpack_require__(/*! passport */ \"passport\");\nrouter.get('/', forwardAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return getClient();\n        case 3:\n          client = _context.sent;\n          res.render('login/login', {\n            user: client.user.username,\n            avatar: client.user.avatarURL()\n          });\n          _context.next = 12;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(_context.t0);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.get('/api', forwardAuthenticated, function (req, res, next) {\n  passport.authenticate('discord', {\n    successRedirect: '/home',\n    failureRedirect: '/login',\n    failureFlash: true\n  })(req, res, next);\n});\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/login.js?");

/***/ }),

/***/ "./routes/members.js":
/*!***************************!*\
  !*** ./routes/members.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated;\nvar router = express.Router();\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar themes = \"../src/configs/theme.json\";\nvar discord = __webpack_require__(/*! ../bot */ \"./bot.js\");\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nrouter.get(\"/members\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, guild_id, theme, page, limit, offset, baseQuery, countQuery, params, countParams, _yield$db$query, _yield$db$query2, results, _yield$db$query3, _yield$db$query4, _yield$db$query4$, count, totalPages, joined_at;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return discord.getClient();\n        case 3:\n          client = _context.sent;\n          guild_id = req.query.guildId;\n          theme = jsonfile.readFileSync(themes);\n          page = parseInt(req.query.page) || 1;\n          limit = 25;\n          offset = (page - 1) * limit;\n          baseQuery = \"SELECT * FROM members WHERE guild_id = ? ORDER BY joined_at DESC LIMIT ? OFFSET ?\";\n          countQuery = \"SELECT COUNT(*) as count FROM members WHERE guild_id = ?\";\n          params = [guild_id, limit, offset];\n          countParams = [guild_id];\n          if (guild_id) {\n            _context.next = 15;\n            break;\n          }\n          throw new Error(\"Guild id is required\");\n        case 15:\n          _context.next = 17;\n          return db.query(baseQuery, params, function (err, result, next) {\n            if (err) {\n              console.error(\"âŒ DB error:\", err.message);\n              err.status = 500;\n              return next(err);\n            }\n            return result;\n          });\n        case 17:\n          _yield$db$query = _context.sent;\n          _yield$db$query2 = _slicedToArray(_yield$db$query, 1);\n          results = _yield$db$query2[0];\n          _context.next = 22;\n          return db.query(countQuery, [countParams], function (err, result, next) {\n            if (err) {\n              console.error(\"âŒ DB error:\", err.message);\n              err.status = 500;\n              return next(err);\n            }\n            return result;\n          });\n        case 22:\n          _yield$db$query3 = _context.sent;\n          _yield$db$query4 = _slicedToArray(_yield$db$query3, 1);\n          _yield$db$query4$ = _slicedToArray(_yield$db$query4[0], 1);\n          count = _yield$db$query4$[0].count;\n          totalPages = Math.ceil(count / limit);\n          joined_at = new Date(results[0].joined_at);\n          res.render(\"home/members\", {\n            members: results,\n            profile: req.user,\n            client: client,\n            theme: theme,\n            currentPage: page,\n            totalPages: totalPages,\n            joinedat: joined_at,\n            guildId: guild_id\n          });\n          _context.next = 36;\n          break;\n        case 31:\n          _context.prev = 31;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 36:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 31]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/members.js?");

/***/ }),

/***/ "./routes/player.js":
/*!**************************!*\
  !*** ./routes/player.js ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated;\nvar _require2 = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require2.getClient;\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar themes = \"../src/configs/theme.json\";\nvar _require3 = __webpack_require__(/*! discord-player */ \"discord-player\"),\n  useQueue = _require3.useQueue;\nvar _require4 = __webpack_require__(/*! discord-player */ \"discord-player\"),\n  Player = _require4.Player,\n  useTimeline = _require4.useTimeline;\nvar _require5 = __webpack_require__(/*! @discord-player/extractor */ \"@discord-player/extractor\"),\n  DefaultExtractors = _require5.DefaultExtractors;\nvar _require6 = __webpack_require__(/*! discord-player-youtubei */ \"discord-player-youtubei\"),\n  YoutubeiExtractor = _require6.YoutubeiExtractor;\n\n// Initialize the client.player\nrouter.get('/player', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, guildId, theme, queue, currentTrack, queuedata, queuemap;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return getClient();\n        case 2:\n          client = _context.sent;\n          _context.prev = 3;\n          guildId = req.query.guildId;\n          theme = jsonfile.readFileSync(themes);\n          if (guildId) {\n            _context.next = 8;\n            break;\n          }\n          throw new Error(\"Missing guildId\");\n        case 8:\n          if (client.player) {\n            _context.next = 10;\n            break;\n          }\n          throw new Error(\"Player is not initialized\");\n        case 10:\n          queue = client.player.nodes.get(guildId);\n          if (queue) {\n            _context.next = 13;\n            break;\n          }\n          throw new Error(\"No music queue found\");\n        case 13:\n          currentTrack = queue.currentTrack;\n          if (currentTrack) {\n            _context.next = 16;\n            break;\n          }\n          throw new Error(\"No music playing\");\n        case 16:\n          queuedata = queue.tracks.toArray();\n          queuemap = queuedata.map(function (track, index) {\n            return {\n              index: index + 1,\n              title: track.title,\n              author: track.author,\n              thumbnail: track.thumbnail\n            };\n          });\n          res.render('home/player', {\n            profile: req.user,\n            client: client,\n            theme: theme,\n            status: 'Playing',\n            track: currentTrack.title,\n            artist: currentTrack.author,\n            thumbnail: currentTrack.thumbnail,\n            duration: currentTrack.duration,\n            guildId: guildId,\n            queue: queuemap\n          });\n          _context.next = 26;\n          break;\n        case 21:\n          _context.prev = 21;\n          _context.t0 = _context[\"catch\"](3);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0); // Forward to your global 500 handler\n        case 26:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[3, 21]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post('/player/pause', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var guildId, queue, timeline, wasPaused;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          guildId = req.body.guildId;\n          if (guildId) {\n            _context2.next = 4;\n            break;\n          }\n          throw new Error(\"Missing guildId\");\n        case 4:\n          queue = client.player.nodes.get(guildId);\n          if (queue) {\n            _context2.next = 7;\n            break;\n          }\n          throw new Error(\"No queue found for this guild\");\n        case 7:\n          // This is safe now â€“ useTimeline gets the correct context from the queue\n          timeline = useTimeline({\n            node: queue\n          });\n          wasPaused = timeline.paused;\n          if (wasPaused) {\n            timeline.resume();\n          } else {\n            timeline.pause();\n          }\n          return _context2.abrupt(\"return\", res.status(200).json({\n            status: wasPaused ? 'resumed' : 'paused'\n          }));\n        case 13:\n          _context2.prev = 13;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context2.t0.message);\n          _context2.t0.status = 500;\n          next(_context2.t0); // Forward to your global 500 handler\n        case 18:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 13]]);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nrouter.post('/player/play', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res, next) {\n    var guildId, queue, timeline, wasPaused;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          guildId = req.body.guildId;\n          if (guildId) {\n            _context3.next = 4;\n            break;\n          }\n          throw new Error('Missing guildId');\n        case 4:\n          queue = client.player.nodes.get(guildId);\n          if (queue) {\n            _context3.next = 7;\n            break;\n          }\n          throw new Error('No queue found for this guild');\n        case 7:\n          // This is safe now â€“ useTimeline gets the correct context from the queue\n          timeline = useTimeline({\n            node: queue\n          });\n          wasPaused = timeline.paused;\n          if (!wasPaused) {\n            _context3.next = 13;\n            break;\n          }\n          timeline.resume();\n          _context3.next = 14;\n          break;\n        case 13:\n          throw new Error('the queue wasnt paused');\n        case 14:\n          return _context3.abrupt(\"return\", res.status(200).json({\n            status: wasPaused ? 'resumed' : 'paused'\n          }));\n        case 17:\n          _context3.prev = 17;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context3.t0.message);\n          _context3.t0.status = 500;\n          next(_context3.t0); // Forward to your global 500 handler\n        case 22:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 17]]);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nrouter.post('/player/skip', ensureAuthenticated, function (req, res) {\n  try {\n    var guildId = req.body.guildId;\n    var queue = client.player.nodes.get(guildId);\n    if (!queue) {\n      throw new Error('No queue runnig');\n    }\n    var Queue = useQueue(queue);\n    Queue.node.skip();\n    return res.status(200).redirect('/player');\n  } catch (error) {\n    console.error(\"âŒ Route error:\", error.message);\n    error.status = 500;\n    next(error); // Forward to your global 500 handler\n  }\n});\nrouter.post('/player/play-selected', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res, next) {\n    var _req$body, guildId, index, queue, trackIndex, tracks, i, currentTrack, updatedQueue;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _req$body = req.body, guildId = _req$body.guildId, index = _req$body.index;\n          if (!(!guildId || index === undefined)) {\n            _context4.next = 4;\n            break;\n          }\n          throw new Error('Missing guildId or index');\n        case 4:\n          queue = client.player.nodes.get(guildId);\n          if (queue) {\n            _context4.next = 7;\n            break;\n          }\n          throw new Error('No queue found for this guild');\n        case 7:\n          trackIndex = Number(index);\n          if (!isNaN(trackIndex)) {\n            _context4.next = 10;\n            break;\n          }\n          throw new Error('Index must be a number');\n        case 10:\n          // Get all tracks as an array\n          tracks = queue.tracks.toArray();\n          if (!(trackIndex < 0 || trackIndex >= tracks.length)) {\n            _context4.next = 13;\n            break;\n          }\n          throw new Error('Invalid track index');\n        case 13:\n          // Remove tracks before the selected index using node.remove()\n          for (i = 0; i < trackIndex; i++) {\n            queue.node.remove(tracks[i]);\n          }\n\n          // Skip to the now-first track (our selected track)\n          queue.node.skip();\n\n          // Get updated queue data\n          currentTrack = queue.currentTrack;\n          updatedQueue = queue.tracks.toArray().map(function (track, idx) {\n            return {\n              index: idx + 1,\n              title: track.title,\n              author: track.author,\n              thumbnail: track.thumbnail\n            };\n          });\n          res.status(200).json({\n            success: true,\n            nowPlaying: {\n              title: currentTrack.title,\n              author: currentTrack.author,\n              thumbnail: currentTrack.thumbnail,\n              duration: currentTrack.duration\n            },\n            queue: updatedQueue\n          });\n          _context4.next = 25;\n          break;\n        case 20:\n          _context4.prev = 20;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context4.t0.message);\n          _context4.t0.status = 500;\n          next(_context4.t0);\n        case 25:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 20]]);\n  }));\n  return function (_x0, _x1, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/player.js?");

/***/ }),

/***/ "./routes/plugins.js":
/*!***************************!*\
  !*** ./routes/plugins.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated;\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar _require2 = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require2.getClient;\nvar router = express.Router();\nvar themes = \"./configs/theme.json\";\nvar dateformat = __webpack_require__(/*! dateformat */ \"dateformat\");\nrouter.get('/plugins', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, guildId, theme, guildinfo;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return getClient();\n        case 3:\n          client = _context.sent;\n          guildId = req.query.guildId;\n          theme = jsonfile.readFileSync(themes);\n          guildinfo = client.guilds.cache.get(guildId);\n          if (guildinfo) {\n            _context.next = 11;\n            break;\n          }\n          _context.next = 10;\n          return client.guilds.fetch(guildId);\n        case 10:\n          guildinfo = _context.sent;\n        case 11:\n          if (guildinfo) {\n            _context.next = 13;\n            break;\n          }\n          return _context.abrupt(\"return\", res.status(404).send('Guild not found.'));\n        case 13:\n          res.render('home/plugins', {\n            theme: theme,\n            client: client,\n            profile: req.user,\n            guild: guildinfo,\n            dateformat: dateformat\n          });\n          _context.next = 21;\n          break;\n        case 16:\n          _context.prev = 16;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 16]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post('/plugins/player/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          try {\n            guildId = req.params.id;\n            res.redirect(\"/player?guildId=\".concat(guildId));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nrouter.post('/plugins/members/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          try {\n            guildId = req.params.id;\n            res.redirect(\"/members?guildId=\".concat(guildId));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nrouter.post('/plugins/history/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          try {\n            guildId = req.params.id;\n            res.redirect(\"/history?guildId=\".concat(guildId));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x0, _x1, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nrouter.post('/plugins/welcome/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          try {\n            guildId = req.params.id;\n            res.redirect(\"/welcome?guildId=\".concat(guildId));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function (_x11, _x12, _x13) {\n    return _ref5.apply(this, arguments);\n  };\n}());\nrouter.post('/plugins/reactionroles/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          try {\n            guildId = req.params.id;\n            res.redirect(\"/reactionroles?guildId=\".concat(guildId));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function (_x14, _x15, _x16) {\n    return _ref6.apply(this, arguments);\n  };\n}());\nrouter.post('/plugins/automod/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          try {\n            guildId = req.params.id;\n            res.redirect(\"/automod?guildId=\".concat(guildId));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref7.apply(this, arguments);\n  };\n}());\nrouter.post('/plugins/sendmessage/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          try {\n            guildId = req.params.id;\n            res.redirect(\"/sendmessage?guildId=\".concat(guildId));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return function (_x20, _x21, _x22) {\n    return _ref8.apply(this, arguments);\n  };\n}());\nrouter.post('/plugins/levels/:id', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(req, res, next) {\n    var guildId;\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          try {\n            guildId = req.params.id;\n            res.redirect(\"/levels?guildId=\".concat(guildId));\n          } catch (error) {\n            console.error(\"âŒ Route error:\", error.message);\n            error.status = 500;\n            next(error);\n          }\n        case 1:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9);\n  }));\n  return function (_x23, _x24, _x25) {\n    return _ref9.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/plugins.js?");

/***/ }),

/***/ "./routes/reactionRoles.js":
/*!*********************************!*\
  !*** ./routes/reactionRoles.js ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated;\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar _require2 = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require2.getClient;\nvar _require3 = __webpack_require__(/*! ../utils/getBotGuilds */ \"./utils/getBotGuilds.js\"),\n  getBotGuild = _require3.getBotGuild;\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nvar _require4 = __webpack_require__(/*! discord.js */ \"discord.js\"),\n  ChannelType = _require4.ChannelType;\nvar themes = \"./configs/theme.json\";\nrouter.get('/reactionroles', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var _client, guildId, theme, success, guild, textChannels, roles, _yield$db$execute, _yield$db$execute2, reactionRoles, savedSettings;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return getClient();\n        case 3:\n          _client = _context.sent;\n          guildId = req.query.guildId;\n          theme = jsonfile.readFileSync(themes);\n          success = req.query.success ? \"âœ… Reaction roles saved!\" : null;\n          if (guildId) {\n            _context.next = 9;\n            break;\n          }\n          throw new Error(\"âŒ No guildId provided\");\n        case 9:\n          _context.next = 11;\n          return getBotGuild(guildId);\n        case 11:\n          guild = _context.sent;\n          if (guild) {\n            _context.next = 14;\n            break;\n          }\n          throw new Error(\"Guild with ID \".concat(guildId, \" not found or bot is not in the guild.\"));\n        case 14:\n          _context.next = 16;\n          return guild.channels.fetch();\n        case 16:\n          _context.next = 18;\n          return guild.roles.fetch();\n        case 18:\n          textChannels = guild.channels.cache.filter(function (channel) {\n            return channel.type === ChannelType.GuildText;\n          }).map(function (channel) {\n            return {\n              id: channel.id,\n              name: channel.name\n            };\n          });\n          roles = guild.roles.cache.filter(function (role) {\n            return !role.managed && role.name !== '@everyone';\n          }).map(function (role) {\n            return {\n              id: role.id,\n              name: role.name\n            };\n          }); // Fetch existing reaction roles from DB\n          _context.next = 22;\n          return db.execute(\"SELECT message_id, emoji, role_id, channel_id, reactionEnabled, message FROM reaction_roles WHERE guild_id = ?\", [guildId]);\n        case 22:\n          _yield$db$execute = _context.sent;\n          _yield$db$execute2 = _slicedToArray(_yield$db$execute, 1);\n          reactionRoles = _yield$db$execute2[0];\n          savedSettings = reactionRoles[0] || {};\n          res.render(\"home/reactionroles\", {\n            theme: theme,\n            profile: req.user,\n            client: _client,\n            guild: guild,\n            textChannels: textChannels,\n            roles: roles,\n            reactionRoles: savedSettings,\n            success: success,\n            guildId: guildId\n          });\n          _context.next = 34;\n          break;\n        case 29:\n          _context.prev = 29;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ ReactionRoles Route Error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 34:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 29]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post('/reactionroles/save', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var _req$body, guildId, reactionChannel, messageContent, emoji, roleId, reactionEnabled, guild, channel, emojis, roleIds, _yield$db$execute3, _yield$db$execute4, rows, sentMessage, existingMessageId, existingMessage, _existingMessage, _iterator, _step, e, insertPromises;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _req$body = req.body, guildId = _req$body.guildId, reactionChannel = _req$body.reactionChannel, messageContent = _req$body.messageContent, emoji = _req$body.emoji, roleId = _req$body.roleId, reactionEnabled = _req$body.reactionEnabled;\n          if (!(!guildId || !reactionChannel || !messageContent || !emoji || !roleId)) {\n            _context2.next = 4;\n            break;\n          }\n          throw new Error(\"Missing required fields.\");\n        case 4:\n          _context2.next = 6;\n          return client.guilds.fetch(guildId);\n        case 6:\n          guild = _context2.sent;\n          _context2.next = 9;\n          return guild.channels.fetch(reactionChannel);\n        case 9:\n          channel = _context2.sent;\n          emojis = Array.isArray(emoji) ? emoji : [emoji];\n          roleIds = Array.isArray(roleId) ? roleId : [roleId];\n          if (!(!channel || channel.type !== ChannelType.GuildText)) {\n            _context2.next = 14;\n            break;\n          }\n          throw new Error(\"Invalid channel type\");\n        case 14:\n          _context2.next = 16;\n          return db.execute(\"SELECT message_id FROM reaction_roles WHERE guild_id = ? AND channel_id = ? LIMIT 1\", [guildId, reactionChannel]);\n        case 16:\n          _yield$db$execute3 = _context2.sent;\n          _yield$db$execute4 = _slicedToArray(_yield$db$execute3, 1);\n          rows = _yield$db$execute4[0];\n          if (!(rows.length > 0)) {\n            _context2.next = 51;\n            break;\n          }\n          // If reactionEnabled is false, delete the message\n          existingMessageId = rows[0].message_id;\n          if (reactionEnabled) {\n            _context2.next = 30;\n            break;\n          }\n          _context2.next = 24;\n          return channel.messages.fetch(existingMessageId);\n        case 24:\n          existingMessage = _context2.sent;\n          _context2.next = 27;\n          return existingMessage[\"delete\"]();\n        case 27:\n          _context2.next = 29;\n          return db.execute(\"DELETE FROM reaction_roles WHERE guild_id = ? AND message_id = ?\", [guildId, existingMessageId]);\n        case 29:\n          return _context2.abrupt(\"return\", res.redirect(\"/reactionroles?guildId=\".concat(guildId, \"&success=true\")));\n        case 30:\n          _context2.prev = 30;\n          _context2.next = 33;\n          return channel.messages.fetch(existingMessageId);\n        case 33:\n          _existingMessage = _context2.sent;\n          _context2.next = 36;\n          return _existingMessage.edit(messageContent);\n        case 36:\n          sentMessage = _existingMessage;\n\n          // Remove old reactions\n          _context2.next = 39;\n          return _existingMessage.reactions.removeAll();\n        case 39:\n          _context2.next = 47;\n          break;\n        case 41:\n          _context2.prev = 41;\n          _context2.t0 = _context2[\"catch\"](30);\n          console.warn(\"âš ï¸ Failed to fetch or edit message. Sending new message instead.\");\n          _context2.next = 46;\n          return channel.send(messageContent);\n        case 46:\n          sentMessage = _context2.sent;\n        case 47:\n          _context2.next = 49;\n          return db.execute(\"DELETE FROM reaction_roles WHERE guild_id = ? AND message_id = ?\", [guildId, existingMessageId]);\n        case 49:\n          _context2.next = 54;\n          break;\n        case 51:\n          _context2.next = 53;\n          return channel.send(messageContent);\n        case 53:\n          sentMessage = _context2.sent;\n        case 54:\n          // React with new emojis\n          _iterator = _createForOfIteratorHelper(emojis);\n          _context2.prev = 55;\n          _iterator.s();\n        case 57:\n          if ((_step = _iterator.n()).done) {\n            _context2.next = 69;\n            break;\n          }\n          e = _step.value;\n          _context2.prev = 59;\n          _context2.next = 62;\n          return sentMessage.react(e);\n        case 62:\n          _context2.next = 67;\n          break;\n        case 64:\n          _context2.prev = 64;\n          _context2.t1 = _context2[\"catch\"](59);\n          console.warn(\"\\u26A0\\uFE0F Could not react with emoji \\\"%s\\\":\", String(e).replace(/%/g, '%%'), _context2.t1.message);\n        case 67:\n          _context2.next = 57;\n          break;\n        case 69:\n          _context2.next = 74;\n          break;\n        case 71:\n          _context2.prev = 71;\n          _context2.t2 = _context2[\"catch\"](55);\n          _iterator.e(_context2.t2);\n        case 74:\n          _context2.prev = 74;\n          _iterator.f();\n          return _context2.finish(74);\n        case 77:\n          // Insert updated entries\n          insertPromises = emojis.map(function (e, i) {\n            return db.execute(\"INSERT INTO reaction_roles (guild_id, channel_id, message_id, emoji, role_id, reactionEnabled, message)\\n         VALUES (?, ?, ?, ?, ?, ?, ?)\", [guildId, reactionChannel, sentMessage.id, e, roleIds[i], reactionEnabled ? 1 : 0, messageContent]);\n          });\n          _context2.next = 80;\n          return Promise.all(insertPromises);\n        case 80:\n          res.redirect(\"/reactionroles?guildId=\".concat(guildId, \"&success=true\"));\n          _context2.next = 87;\n          break;\n        case 83:\n          _context2.prev = 83;\n          _context2.t3 = _context2[\"catch\"](0);\n          console.error(\"âŒ Error saving reaction roles:\", _context2.t3);\n          next(_context2.t3);\n        case 87:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 83], [30, 41], [55, 71, 74, 77], [59, 64]]);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/reactionRoles.js?");

/***/ }),

/***/ "./routes/sendMessage.js":
/*!*******************************!*\
  !*** ./routes/sendMessage.js ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated;\nvar _require2 = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require2.getClient;\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar _require3 = __webpack_require__(/*! ../utils/getBotGuilds */ \"./utils/getBotGuilds.js\"),\n  getBotGuild = _require3.getBotGuild;\nvar router = express.Router();\nvar themes = './configs/theme.json';\nvar _require4 = __webpack_require__(/*! discord.js */ \"discord.js\"),\n  ChannelType = _require4.ChannelType,\n  EmbedBuilder = _require4.EmbedBuilder;\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\");\nrouter.get(\"/sendmessage\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, theme, success, successe, successd, guildId, query, guild, textChannels, _yield$db$query, _yield$db$query2, sendMessage, _yield$db$query3, _yield$db$query4, history, savedSettings;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return getClient();\n        case 3:\n          client = _context.sent;\n          _context.next = 6;\n          return jsonfile.readFileSync(themes);\n        case 6:\n          theme = _context.sent;\n          success = req.query.success ? \"âœ… Message sent succesfuly!\" : null;\n          successe = req.query.sucesse ? \"âœ… Message edited succesfuly!\" : null;\n          successd = req.query.sucessd ? \"âœ… Message deleted succesfuly!\" : null;\n          guildId = req.query.guildId;\n          query = 'SELECT * FROM sendMessage WHERE guild_id = ?';\n          if (guildId) {\n            _context.next = 14;\n            break;\n          }\n          throw new Error('GUILD_ID is required!');\n        case 14:\n          _context.next = 16;\n          return getBotGuild(guildId);\n        case 16:\n          guild = _context.sent;\n          _context.next = 19;\n          return guild.channels.fetch();\n        case 19:\n          textChannels = guild.channels.cache.filter(function (channel) {\n            return channel.type === ChannelType.GuildText;\n          }).map(function (channel) {\n            return {\n              id: channel.id,\n              name: channel.name\n            };\n          });\n          _context.next = 22;\n          return db.query(query, [guildId], function (err, result, next) {\n            if (err) {\n              console.error(err);\n              err.statsus(500);\n              next(err);\n            }\n            ;\n            return result;\n          });\n        case 22:\n          _yield$db$query = _context.sent;\n          _yield$db$query2 = _slicedToArray(_yield$db$query, 1);\n          sendMessage = _yield$db$query2[0];\n          _context.next = 27;\n          return db.query(\"SELECT * FROM message_history WHERE guild_id = ? ORDER BY sent_at DESC\", [guildId]);\n        case 27:\n          _yield$db$query3 = _context.sent;\n          _yield$db$query4 = _slicedToArray(_yield$db$query3, 1);\n          history = _yield$db$query4[0];\n          savedSettings = sendMessage[0] || {};\n          res.render(\"home/sendMessage\", {\n            profile: req.user,\n            theme: theme,\n            client: client,\n            success: success,\n            successe: successe,\n            successd: successd,\n            guildId: guildId,\n            sMessage: savedSettings,\n            channels: textChannels,\n            history: history,\n            guild: guild\n          });\n          _context.next = 39;\n          break;\n        case 34:\n          _context.prev = 34;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(_context.t0);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 39:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 34]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post(\"/sendmessage/save\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var client, guildId, schannel, message, clientId, isEmbed, embedTitle, embedColor, embedFooter, embedAuthor, guild, channel, sentMessage, embed, messageId;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return getClient();\n        case 2:\n          client = _context2.sent;\n          guildId = req.body.guildId;\n          schannel = req.body.channel;\n          message = req.body.messageContent;\n          clientId = client.user.id;\n          isEmbed = req.body.isEmbed ? 1 : 0;\n          embedTitle = req.body.embedTitle;\n          embedColor = req.body.embedColor;\n          embedFooter = req.body.embedFooter;\n          embedAuthor = req.body.embedAuthor;\n          _context2.prev = 12;\n          if (guildId) {\n            _context2.next = 15;\n            break;\n          }\n          throw new Error('GUILD_ID is required!');\n        case 15:\n          if (schannel) {\n            _context2.next = 17;\n            break;\n          }\n          throw new Error('CHANNEL_ID is required!');\n        case 17:\n          _context2.next = 19;\n          return getBotGuild(guildId);\n        case 19:\n          guild = _context2.sent;\n          _context2.next = 22;\n          return guild.channels.fetch(schannel);\n        case 22:\n          channel = _context2.sent;\n          if (!(isEmbed == 1)) {\n            _context2.next = 30;\n            break;\n          }\n          embed = new EmbedBuilder().setTitle(embedTitle).setDescription(message).setColor(embedColor).setFooter({\n            text: embedFooter\n          }).setAuthor({\n            name: embedAuthor\n          });\n          _context2.next = 27;\n          return channel.send({\n            embeds: [embed]\n          });\n        case 27:\n          sentMessage = _context2.sent;\n          _context2.next = 33;\n          break;\n        case 30:\n          _context2.next = 32;\n          return channel.send(message);\n        case 32:\n          sentMessage = _context2.sent;\n        case 33:\n          messageId = sentMessage.id;\n          _context2.next = 36;\n          return db.execute(\"INSERT INTO sendMessage (guild_id, channel_id, message, client_id, isEmbed, embed_title, embed_description, embed_color, embed_footer, embed_author, messageId) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [guildId, schannel, message, clientId, isEmbed, embedTitle || null, message || null, embedColor || null, embedFooter || null, embedAuthor || null, messageId || null]);\n        case 36:\n          _context2.next = 38;\n          return db.execute(\"INSERT INTO message_history (guild_id, channel_id, message, client_id, isEmbed, embed_title, embed_description, embed_color, embed_footer, embed_author, messageId) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [guildId, schannel, clientId, isEmbed, embedTitle || null, message || null, embedColor || null, embedFooter || null, embedAuthor || null, messageId || null]);\n        case 38:\n          res.redirect(\"/sendmessage?guildId=\".concat(guildId, \"&success=true\"));\n          _context2.next = 46;\n          break;\n        case 41:\n          _context2.prev = 41;\n          _context2.t0 = _context2[\"catch\"](12);\n          console.error(_context2.t0);\n          _context2.t0.status = 500;\n          next(_context2.t0);\n        case 46:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[12, 41]]);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nrouter.post(\"/sendmessage/edit/:id\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res, next) {\n    var client, messageId, channelId, guildId, message, clientId, isEmbed, embedTitle, embedColor, embedFooter, embedAuthor, embedDescription, sentMessage, guild, channel, messageSent, embed, newMessageId, _newMessageId;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return getClient();\n        case 3:\n          client = _context3.sent;\n          messageId = req.body.messageId;\n          channelId = req.body.channelId;\n          guildId = req.body.guildId;\n          message = req.body.messageContent;\n          clientId = client.user.id;\n          isEmbed = req.body.isEmbed ? 1 : 0;\n          embedTitle = req.body.embedTitle;\n          embedColor = req.body.embedColor;\n          embedFooter = req.body.embedFooter;\n          embedAuthor = req.body.embedAuthor;\n          embedDescription = req.body.embedDescription;\n          _context3.next = 17;\n          return getBotGuild(guildId);\n        case 17:\n          guild = _context3.sent;\n          if (guild) {\n            _context3.next = 20;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(404).send(\"Guild not found.\"));\n        case 20:\n          _context3.next = 22;\n          return guild.channels.fetch(channelId);\n        case 22:\n          channel = _context3.sent;\n          if (!(!channel || !channel.isTextBased())) {\n            _context3.next = 25;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(404).send(\"Channel not found or not text.\"));\n        case 25:\n          _context3.next = 27;\n          return channel.messages.fetch(messageId);\n        case 27:\n          messageSent = _context3.sent;\n          if (messageSent) {\n            _context3.next = 30;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(404).send(\"Message not found.\"));\n        case 30:\n          if (!(Number(isEmbed) === 1)) {\n            _context3.next = 49;\n            break;\n          }\n          _context3.next = 33;\n          return messageSent[\"delete\"]();\n        case 33:\n          _context3.next = 35;\n          return db.query('DELETE FROM sendMessage WHERE messageId = ?', [messageId]);\n        case 35:\n          _context3.next = 37;\n          return db.query('DELETE FROM message_history WHERE messageId = ?', [messageId]);\n        case 37:\n          embed = new EmbedBuilder().setColor(embedColor).setTitle(embedTitle).setFooter(embedFooter).setAuthor(embedAuthor).setDescription(embedDescription);\n          _context3.next = 40;\n          return channel.send(embed);\n        case 40:\n          sentMessage = _context3.sent;\n          newMessageId = sentMessage.id;\n          _context3.next = 44;\n          return db.execute(\"INSERT INTO sendMessage (guild_id, channel_id, message, client_id, isEmbed, embed_title, embed_description, embed_color, embed_footer, embed_author, messageId) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [guildId, channelId, message, clientId, isEmbed, embedTitle || null, embedDescription || null, embedColor || null, embedFooter || null, embedAuthor || null, newMessageId || null]);\n        case 44:\n          _context3.next = 46;\n          return db.execute(\"INSERT INTO message_history (guild_id, channel_id, message, client_id, isEmbed, embed_title, embed_description, embed_color, embed_footer, embed_author, messageId) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [guildId, channelId, message || null, clientId, isEmbed, embedTitle || null, embedDescription || null, embedColor || null, embedFooter || null, embedAuthor || null, newMessageId || null]);\n        case 46:\n          res.redirect(\"/sendmessage?guildId=\".concat(guildId, \"&successe=true\"));\n          _context3.next = 64;\n          break;\n        case 49:\n          _context3.next = 51;\n          return messageSent[\"delete\"]();\n        case 51:\n          _context3.next = 53;\n          return db.query('DELETE FROM sendMessage WHERE messageId = ?', [messageId]);\n        case 53:\n          _context3.next = 55;\n          return db.query('DELETE FROM message_history WHERE messageId = ?', [messageId]);\n        case 55:\n          _context3.next = 57;\n          return channel.send(message);\n        case 57:\n          sentMessage = _context3.sent;\n          _newMessageId = sentMessage.id;\n          _context3.next = 61;\n          return db.execute(\"INSERT INTO sendMessage (guild_id, channel_id, message, client_id, isEmbed, embed_title, embed_description, embed_color, embed_footer, embed_author, messageId) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [guildId, channelId, message || null, clientId, isEmbed, embedTitle || null, embedDescription || null, embedColor || null, embedFooter || null, embedAuthor || null, _newMessageId || null]);\n        case 61:\n          _context3.next = 63;\n          return db.execute(\"INSERT INTO message_history (guild_id, channel_id, message, client_id, isEmbed, embed_title, embed_description, embed_color, embed_footer, embed_author, messageId) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", [guildId, channelId, message || null, clientId, isEmbed, embedTitle || null, embedDescription || null, embedColor || null, embedFooter || null, embedAuthor || null, _newMessageId || null]);\n        case 63:\n          res.redirect(\"/sendmessage?guildId=\".concat(guildId, \"&successe=true\"));\n        case 64:\n          _context3.next = 71;\n          break;\n        case 66:\n          _context3.prev = 66;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(_context3.t0);\n          _context3.t0.status = 500;\n          next(_context3.t0);\n        case 71:\n          ;\n        case 72:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 66]]);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nrouter.post(\"/sendmessage/del/:id\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res, next) {\n    var messageId, channelId, guildId, guild, channel, message;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          messageId = req.body.messageId;\n          channelId = req.body.channelId;\n          guildId = req.body.guildId;\n          _context4.prev = 3;\n          _context4.next = 6;\n          return getBotGuild(guildId);\n        case 6:\n          guild = _context4.sent;\n          if (guild) {\n            _context4.next = 9;\n            break;\n          }\n          return _context4.abrupt(\"return\", res.status(404).send(\"Guild not found.\"));\n        case 9:\n          _context4.next = 11;\n          return guild.channels.fetch(channelId);\n        case 11:\n          channel = _context4.sent;\n          if (!(!channel || !channel.isTextBased())) {\n            _context4.next = 14;\n            break;\n          }\n          return _context4.abrupt(\"return\", res.status(404).send(\"Channel not found or not text.\"));\n        case 14:\n          _context4.next = 16;\n          return channel.messages.fetch(messageId);\n        case 16:\n          message = _context4.sent;\n          if (message) {\n            _context4.next = 19;\n            break;\n          }\n          return _context4.abrupt(\"return\", res.status(404).send(\"Message not found.\"));\n        case 19:\n          _context4.next = 21;\n          return message[\"delete\"]();\n        case 21:\n          _context4.next = 23;\n          return db.query('DELETE FROM sendMessage WHERE messageId = ?', [messageId]);\n        case 23:\n          _context4.next = 25;\n          return db.query('DELETE FROM message_history WHERE messageId = ?', [messageId]);\n        case 25:\n          res.redirect(\"/sendmessage?guildId=\".concat(guildId, \"&successd=true\"));\n          _context4.next = 33;\n          break;\n        case 28:\n          _context4.prev = 28;\n          _context4.t0 = _context4[\"catch\"](3);\n          console.error(_context4.t0);\n          _context4.t0.status = 500;\n          next(_context4.t0);\n        case 33:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[3, 28]]);\n  }));\n  return function (_x0, _x1, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/sendMessage.js?");

/***/ }),

/***/ "./routes/settings.js":
/*!****************************!*\
  !*** ./routes/settings.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _toArray(r) { return _arrayWithHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar discord = __webpack_require__(/*! ../bot */ \"./bot.js\");\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated,\n  forwardAuthenticated = _require.forwardAuthenticated;\nvar version = __webpack_require__(/*! ../configs/version.json */ \"./configs/version.json\");\nvar path = __webpack_require__(/*! path */ \"path\");\nvar ENV_PATH = path.join(__dirname, '..', '/configs/.env');\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar themes = \"./configs/theme.json\";\nvar dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\ndotenv.config({\n  path: './configs/.env'\n});\nvar fs = __webpack_require__(/*! fs */ \"fs\");\nrouter.get('/settings', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, config, theme;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return discord.getClient();\n        case 3:\n          client = _context.sent;\n          config = process.loadEnvFile;\n          theme = jsonfile.readFileSync(themes);\n          fs.readdir(\"./themes/\", function (err, files) {\n            res.render('home/settings', {\n              profile: req.user,\n              client: client,\n              config: config,\n              version: version,\n              themeName: files,\n              theme: theme\n            });\n          });\n          _context.next = 14;\n          break;\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 9]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post('/settings/config', ensureAuthenticated, function (req, res) {\n  var keys = ['clientID', 'clientSecret', 'callbackURL', 'admin', 'token', 'prefix', 'port'];\n  var updates = req.body; // { KEY: 'value', ... }\n\n  // Load current .env as key-value pairs\n  var currentEnv = fs.existsSync(ENV_PATH) ? fs.readFileSync(ENV_PATH, 'utf-8').split('\\n').filter(Boolean).reduce(function (acc, line) {\n    var _line$split = line.split('='),\n      _line$split2 = _toArray(_line$split),\n      key = _line$split2[0],\n      valParts = _line$split2.slice(1);\n    acc[key] = valParts.join('=');\n    return acc;\n  }, {}) : {};\n\n  // Apply updates\n  Object.entries(updates).forEach(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n      key = _ref3[0],\n      value = _ref3[1];\n    currentEnv[key] = value;\n  });\n\n  // Convert back to .env format\n  var newEnvContent = Object.entries(currentEnv).map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      key = _ref5[0],\n      value = _ref5[1];\n    return \"\".concat(key, \"=\").concat(value);\n  }).join('\\n');\n\n  // Save to .env file\n  fs.writeFileSync(ENV_PATH, newEnvContent);\n  req.flash('success', 'Config updated successfully. Please restart the app!');\n  res.redirect('/settings');\n});\nrouter.post('/settings/dashboard', ensureAuthenticated, function (req, res) {\n  json.update('./configs/theme.json', {\n    theme: \"\".concat(req.body.theme)\n  }).then(function (dat) {\n    req.flash('success', 'Theme Updated!');\n    res.redirect('/settings');\n  });\n});\nrouter.post('/settings/upload/theme', ensureAuthenticated, function (req, res) {\n  var sampleFile;\n  var uploadPath;\n  if (!req.files || Object.keys(req.files).length === 0) {\n    return req.flash('error', \"No file was uploaded, please try again!\"), res.redirect('/settings');\n  }\n  if (!req.files.sampleFile.name.endsWith(\".css\")) {\n    return req.flash('error', \"Please only upload CSS files!\"), res.redirect('/settings');\n  }\n  var path = './themes/' + req.files.sampleFile.name;\n  if (fs.existsSync(path)) {\n    return req.flash('error', \"Theme with that name already exists!\"), res.redirect('/settings');\n  }\n  sampleFile = req.files.sampleFile;\n  uploadPath = './themes/' + sampleFile.name;\n  sampleFile.mv(uploadPath, function (err) {\n    if (err) return res.status(500).send(err);\n    req.flash('success', \"Theme \".concat(sampleFile.name, \" successfully uploaded!\"));\n    res.redirect('/settings');\n  });\n});\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/settings.js?");

/***/ }),

/***/ "./routes/support.js":
/*!***************************!*\
  !*** ./routes/support.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar discord = __webpack_require__(/*! ../bot */ \"./bot.js\");\nvar _require = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require.ensureAuthenticated,\n  forwardAuthenticated = _require.forwardAuthenticated;\nvar themes = \"./configs/theme.json\";\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nrouter.get('/support', ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, theme;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return discord.getClient();\n        case 3:\n          client = _context.sent;\n          theme = jsonfile.readFileSync(themes);\n          res.render('home/support', {\n            profile: req.user,\n            client: client,\n            theme: theme\n          });\n          _context.next = 13;\n          break;\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/support.js?");

/***/ }),

/***/ "./routes/welcome.js":
/*!***************************!*\
  !*** ./routes/welcome.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar db = __webpack_require__(/*! ../database/db */ \"./database/db.js\"); // Your MySQL wrapper\nvar _require = __webpack_require__(/*! ../utils/getBotGuilds */ \"./utils/getBotGuilds.js\"),\n  getBotGuild = _require.getBotGuild;\nvar _require2 = __webpack_require__(/*! ../auth/auth */ \"./auth/auth.js\"),\n  ensureAuthenticated = _require2.ensureAuthenticated;\nvar _require3 = __webpack_require__(/*! ../bot */ \"./bot.js\"),\n  getClient = _require3.getClient;\nvar themes = \"../src/configs/theme.json\";\nvar jsonfile = __webpack_require__(/*! jsonfile */ \"jsonfile\");\nvar _require4 = __webpack_require__(/*! discord.js */ \"discord.js\"),\n  ChannelType = _require4.ChannelType;\nvar escape = __webpack_require__(/*! escape-html */ \"escape-html\");\nrouter.get(\"/welcome\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var client, success, guildId, theme, guild, textChannels, roles, _yield$db$execute, _yield$db$execute2, rows, savedSettings;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return getClient();\n        case 3:\n          client = _context.sent;\n          success = req.query.success ? \"âœ… Welcome settings saved!\" : null;\n          guildId = req.query.guildId;\n          theme = jsonfile.readFileSync(themes);\n          if (guildId) {\n            _context.next = 9;\n            break;\n          }\n          throw new Error(\"No guildId provided\");\n        case 9:\n          _context.next = 11;\n          return getBotGuild(guildId);\n        case 11:\n          guild = _context.sent;\n          if (guild) {\n            _context.next = 14;\n            break;\n          }\n          throw new Error(\"Guild with ID \".concat(guildId, \" not found or bot is not in the guild.\"));\n        case 14:\n          _context.next = 16;\n          return guild.channels.fetch();\n        case 16:\n          // Fetch fresh channels from Discord\n          textChannels = guild.channels.cache.filter(function (channel) {\n            return channel.type === ChannelType.GuildText;\n          }).map(function (channel) {\n            return {\n              id: channel.id,\n              name: channel.name\n            };\n          });\n          roles = guild.roles.cache.map(function (role) {\n            return {\n              id: role.id,\n              name: role.name\n            };\n          }); // Fetch saved settings from database\n          _context.next = 20;\n          return db.execute(\"SELECT welcomeChannel, leaveChannel, welcomeRole, welcomeMessage, leaveMessage, welcomeEnabled FROM guilds WHERE id = ?\", [guildId]);\n        case 20:\n          _yield$db$execute = _context.sent;\n          _yield$db$execute2 = _slicedToArray(_yield$db$execute, 1);\n          rows = _yield$db$execute2[0];\n          savedSettings = rows[0] || {}; // fallback to empty object if not found\n          res.render(\"home/welcome\", {\n            client: client,\n            profile: req.user,\n            config: savedSettings,\n            channels: textChannels,\n            roles: roles,\n            theme: theme,\n            success: success,\n            guildId: guildId\n          });\n          _context.next = 32;\n          break;\n        case 27:\n          _context.prev = 27;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context.t0.message);\n          _context.t0.status = 500;\n          next(_context.t0);\n        case 32:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 27]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.post(\"/welcome\", ensureAuthenticated, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var _req$body, welcomeEnabled, welcomeChannel, leaveChannel, welcomeRole, welcomeMessage, leaveMessage, guildId, guild;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _req$body = req.body, welcomeEnabled = _req$body.welcomeEnabled, welcomeChannel = _req$body.welcomeChannel, leaveChannel = _req$body.leaveChannel, welcomeRole = _req$body.welcomeRole, welcomeMessage = _req$body.welcomeMessage, leaveMessage = _req$body.leaveMessage;\n          guildId = req.body.guildId; // Validate guildId\n          if (guildId) {\n            _context2.next = 6;\n            break;\n          }\n          console.error(\"âŒ No guildId found in the request.\");\n          return _context2.abrupt(\"return\", res.status(400).send(\"Guild ID is required.\"));\n        case 6:\n          _context2.next = 8;\n          return getBotGuild(guildId);\n        case 8:\n          guild = _context2.sent;\n          if (guild) {\n            _context2.next = 12;\n            break;\n          }\n          console.error(\"\\u274C Guild with ID \".concat(guildId, \" not found or bot is not in the guild.\"));\n          return _context2.abrupt(\"return\", res.status(500).send(\"Guild with that ID not found or bot is not in the guild.\" + escape(guildId)));\n        case 12:\n          _context2.prev = 12;\n          _context2.next = 15;\n          return guild.channels.fetch();\n        case 15:\n          _context2.next = 21;\n          break;\n        case 17:\n          _context2.prev = 17;\n          _context2.t0 = _context2[\"catch\"](12);\n          console.error(\"âŒ Error fetching channels:\", _context2.t0.message);\n          return _context2.abrupt(\"return\", res.status(500).send(\"Error fetching channels.\"));\n        case 21:\n          _context2.next = 23;\n          return db.execute(\"UPDATE guilds \\n         SET welcomeChannel = ?, \\n             leaveChannel = ?, \\n             welcomeRole = ?, \\n             welcomeMessage = ?, \\n             leaveMessage = ?, \\n             welcomeEnabled = ?  \\n         WHERE id = ?\", [welcomeChannel || null,\n          // Default to null if not provided\n          leaveChannel || null,\n          // Default to null if not provided\n          welcomeRole || null,\n          // Default to null if not provided\n          welcomeMessage || '',\n          // Default to empty string if not provided\n          leaveMessage || '',\n          // Default to empty string if not provided\n          welcomeEnabled ? 1 : 0,\n          // Ensure this is a boolean (0 or 1)\n          guildId]);\n        case 23:\n          res.redirect(\"/welcome?guildId=\".concat(guildId, \"&success=true\"));\n          _context2.next = 31;\n          break;\n        case 26:\n          _context2.prev = 26;\n          _context2.t1 = _context2[\"catch\"](0);\n          console.error(\"âŒ Route error:\", _context2.t1.message);\n          _context2.t1.status = 500;\n          next(_context2.t1);\n        case 31:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 26], [12, 17]]);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\n\n//# sourceURL=webpack://dbot/./routes/welcome.js?");

/***/ }),

/***/ "./utils/getBotGuilds.js":
/*!*******************************!*\
  !*** ./utils/getBotGuilds.js ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { return Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = c(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar discord = __webpack_require__(/*! ../bot */ \"./bot.js\");\n\n/**\r\n * Retrieves the guild object from cache or fetches if not cached.\r\n * @param {string} guildId - The ID of the guild.\r\n * @returns {Promise<Guild|null>}\r\n */\nfunction getBotGuild(_x) {\n  return _getBotGuild.apply(this, arguments);\n}\nfunction _getBotGuild() {\n  _getBotGuild = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(guildId) {\n    var client, guild;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return discord.getClient();\n        case 2:\n          client = _context.sent;\n          _context.prev = 3;\n          // First check the cache\n          guild = client.guilds.cache.get(guildId); // If not cached, fetch it\n          if (guild) {\n            _context.next = 9;\n            break;\n          }\n          _context.next = 8;\n          return client.guilds.fetch(guildId, {\n            force: true\n          });\n        case 8:\n          guild = _context.sent;\n        case 9:\n          return _context.abrupt(\"return\", guild);\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](3);\n          console.error(\"Failed to get guild %s:\", guildId, _context.t0);\n          return _context.abrupt(\"return\", null);\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[3, 12]]);\n  }));\n  return _getBotGuild.apply(this, arguments);\n}\nmodule.exports = {\n  getBotGuild: getBotGuild\n};\n\n//# sourceURL=webpack://dbot/./utils/getBotGuilds.js?");

/***/ }),

/***/ "@discord-player/extractor":
/*!********************************************!*\
  !*** external "@discord-player/extractor" ***!
  \********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@discord-player/extractor");

/***/ }),

/***/ "chalk":
/*!************************!*\
  !*** external "chalk" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("chalk");

/***/ }),

/***/ "connect-flash":
/*!********************************!*\
  !*** external "connect-flash" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("connect-flash");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("cors");

/***/ }),

/***/ "dateformat":
/*!*****************************!*\
  !*** external "dateformat" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("dateformat");

/***/ }),

/***/ "discord-player":
/*!*********************************!*\
  !*** external "discord-player" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("discord-player");

/***/ }),

/***/ "discord-player-youtubei":
/*!******************************************!*\
  !*** external "discord-player-youtubei" ***!
  \******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("discord-player-youtubei");

/***/ }),

/***/ "discord.js":
/*!*****************************!*\
  !*** external "discord.js" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("discord.js");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("dotenv");

/***/ }),

/***/ "easy-number-formatter":
/*!****************************************!*\
  !*** external "easy-number-formatter" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("easy-number-formatter");

/***/ }),

/***/ "enmap":
/*!************************!*\
  !*** external "enmap" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("enmap");

/***/ }),

/***/ "escape-html":
/*!******************************!*\
  !*** external "escape-html" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("escape-html");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("express");

/***/ }),

/***/ "express-fileupload":
/*!*************************************!*\
  !*** external "express-fileupload" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("express-fileupload");

/***/ }),

/***/ "express-partials":
/*!***********************************!*\
  !*** external "express-partials" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("express-partials");

/***/ }),

/***/ "express-rate-limit":
/*!*************************************!*\
  !*** external "express-rate-limit" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("express-rate-limit");

/***/ }),

/***/ "express-session":
/*!**********************************!*\
  !*** external "express-session" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("express-session");

/***/ }),

/***/ "figlet":
/*!*************************!*\
  !*** external "figlet" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("figlet");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "inspector":
/*!****************************!*\
  !*** external "inspector" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("inspector");

/***/ }),

/***/ "jsonfile":
/*!***************************!*\
  !*** external "jsonfile" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("jsonfile");

/***/ }),

/***/ "lolcatjs":
/*!***************************!*\
  !*** external "lolcatjs" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("lolcatjs");

/***/ }),

/***/ "morgan":
/*!*************************!*\
  !*** external "morgan" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("morgan");

/***/ }),

/***/ "mysql2/promise":
/*!*********************************!*\
  !*** external "mysql2/promise" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("mysql2/promise");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "passport":
/*!***************************!*\
  !*** external "passport" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("passport");

/***/ }),

/***/ "passport-discord":
/*!***********************************!*\
  !*** external "passport-discord" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("passport-discord");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "request":
/*!**************************!*\
  !*** external "request" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("request");

/***/ }),

/***/ "sanitize-filename":
/*!************************************!*\
  !*** external "sanitize-filename" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("sanitize-filename");

/***/ }),

/***/ "semver":
/*!*************************!*\
  !*** external "semver" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("semver");

/***/ }),

/***/ "serve-favicon":
/*!********************************!*\
  !*** external "serve-favicon" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("serve-favicon");

/***/ }),

/***/ "socket.io":
/*!****************************!*\
  !*** external "socket.io" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("socket.io");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./index.js");
/******/ 	
/******/ })()
;